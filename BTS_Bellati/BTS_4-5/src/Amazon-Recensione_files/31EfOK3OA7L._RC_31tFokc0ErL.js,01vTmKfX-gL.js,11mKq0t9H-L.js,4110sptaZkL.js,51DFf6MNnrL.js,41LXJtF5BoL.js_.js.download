(function(h){var l=window.AmazonUIPageJS||window.P,p=l._namespace||l.attributeErrors,b=p?p("CustomerReviewsCommonAssets"):l;b.guardFatal?b.guardFatal(h)(b,window):b.execute(function(){h(b,window)})})(function(h,l,p){h.when("A","cr-log-utils","cr-uri-utils").register("cr-ajax-model",function(b,a,c){function d(a){var b=c.getUrlParametersMap()||{};b["overrides-marketplace-id"]&&(a=c.addKeyValuePair(a,"overrides-marketplace-id",b["overrides-marketplace-id"]));return a}function g(a){k[a]&&(k[a].abort(),
delete k[a])}function f(c,t,u,n,h,p,C){var E;E=p?p:q=q++;p=E;h=h?h:t.error||function(){};n=n?n:0;u=u?u:3;var z=t.finallyCallback||function(){};c=d(c);C||(C="reviewsAjax"+e++,l.uet&&l.uet("tc",C));t.params.scope=C;t.contentType="application/x-www-form-urlencoded;charset=UTF-8";var w=t.success||function(){};t.success=function(a){delete k[p];"function"===typeof w&&w(a);"function"===typeof z&&z(a)};t.error=function(b){g(p);n++;n<u?(a.logError("AJAX Post to "+c+" failed, Attempt: "+n+" out of "+u,"WARN"),
f(c,t,u,n,h,p,C)):(a.logError("AJAX Post to "+c+" from "+l.location.href+" failed, exhausted "+u+" attempts","FATAL"),"function"===typeof h&&h(b),"function"===typeof z&&z(b))};k[p]=b.post(c,t);return p}var e=0,q=1,k={};return{abort:g,post:f}});h.when("A","jQuery","cr-log-utils","cr-number-utils").register("cr-A",function(b,a,c,d){var g={top:-100,left:-100};b.inView=function(b){b=b||a();if("function"===typeof b.offset){var c=(b.offset()||g).top-a(l).scrollTop();b=0<=c;c=c<a(l).height();
return b&&c}return!1};b.onScreenAndVisible=function(b,c){b=b||a();var g=d.isFiniteNumber(c)?c:0;if(b instanceof a||b.jquery){if(!b.is(":visible"))return!1;var k=b[0].getBoundingClientRect();return k.top>=0-g&&k.left>=0-g&&k.bottom<=a(l).height()+g&&k.right<=a(l).width()+g}return!1};b.compositeEventWrapper=function(a,d,g){var k=a;g&&(k=b.throttle(k,g,{trailing:!1}));return c.jsGuard(function(a){a&&(k(a),d&&a.$event&&a.$event.preventDefault())})};return b});h.declare("reviews-constants",
{PUSH_STATE:!0,REPLACE_STATE:!1,RATING_SERVICE_CONTEXT_ID:"ReviewsConsumption",data:{REFTAG:"data-reftag",CSM_COUNTER:"data-csm-counter",getReviews:{STANDARD:"data-reviews-state-param",CHECKED:"data-reviews-param-checked",UNCHECKED:"data-reviews-param-unchecked"}},events:{CONTENT_CHANGED:"reviews:content-changed",RELOAD:"reviews:content-reload",RELOAD_COMPLETE:"reviews:content-reload-complete",AUTOSCROLL_COMPLETE:"reviews:autoscroll-complete",FILTER_FIRE_AGGREGATE:"reviews:filter-action:aggregate:trigger",
FILTER_FIRE_UPDATE:"reviews:filter-action:trigger",FILTER_AGGREGATE:"reviews:filter-action:aggregate",FILTER_PUSH:"reviews:filter-action:push-state",FILTER_REPLACE:"reviews:filter-action:replace-state",PAGINATION:"reviews:page-action",SEARCH_TEXTBOX:"reviews:search-textbox",SEARCH_BUTTON:"reviews:search-button",VOTE:"reviews:vote-action",TOGGLE_CLASS_CLICK:"reviews:toggle-class:click",AJAX_POST:"reviews:ajax-post",FILTER_APPLY:"reviews:filter-action:apply",FILTER_CHANGE:"reviews:filter-action:change",
FILTER_TAB_CLICKED:"reviews:filter-action:tab-clicked",FILTER_APPLY_BEGIN:"reviews:filter-action:apply-begin",FILTER_APPLY_SUCCESS:"reviews:filter-action:apply-success",FILTER_APPLY_ERROR:"reviews:filter-action:apply-error",FILTER_APPLY_DONE:"reviews:filter-action:apply-done",INPUT_COMMENT:"reviews:input-comment",SUBMIT_COMMENT:"reviews:submit-comment",OPEN_SUBMISSION_COMMENT:"reviews:open-comment-submission",SORT_COMMENTS:"reviews:sort-comments",MORE_COMMENTS:"reviews:more-comments",EDIT_COMMENT:"reviews:edit-comment",
CANCEL_EDIT_COMMENT:"reviews:cancel-edit-comment",DELETE_COMMENT:"reviews:delete-comment",SUBMIT_EDIT_COMMENT:"reviews:submit-edit-comment",MODIFY_EDIT_COMMENT:"reviews:modify-edit-comment",INPUT_PRODUCT_LINK:"reviews:input-product-link",SELECT_PRODUCT_LINK:"reviews:select-product-link",FEEDBACK_CLICK:"reviews:skyfall-feedback-click",CLIQUE_CLICK:"reviews:skyfall-clique-click",STAR_RATING_CLICK:"ryp:star-rating-click",STAR_RATING_CLEAR:"ryp:star-rating-clear-click"},filterOptions:{SORT_KEY:"sortBy",
HELPFUL:"helpful",RECENT:"recent",LEGACY_HELPFUL:"byRankDescending",LEGACY_RECENT:"bySubmissionDateDescending",MOBILE_HELPFUL:"sh",MOBILE_RECENT:"sd",STAR_KEY:"filterByStar",ALL_STARS:"all_stars",ONE_STAR:"one_star",TWO_STAR:"two_star",THREE_STAR:"three_star",FOUR_STAR:"four_star",FIVE_STAR:"five_star",POSTIVE:"positive",CRITICAL:"critical",FORMAT_KEY:"formatType",ALL_FORMATS:"all_formats",CURRENT_FORMAT:"current_format",AVP_KEY:"reviewerType",ALL_REVIEWS:"all_reviews",AVP_ONLY:"avp_only_reviews",
MEDIA_KEY:"mediaType",ALL_CONTENTS:"all_contents",MEDIA_ONLY:"media_reviews_only"},keycodes:{ENTER:13,BACK_SPACE:8,SPACE:32},aui:{HIDDEN:"aok-hidden",NOWRAP:"aok-nowrap"}});h.when("A","cr-string-utils","cr-log-utils").register("cr-popup",function(b,a,c){function d(d){var f={};d&&d.data&&(f=d.data);var e=a.defaultIfBlank(f.url,d.$target.find("a").andSelf().filter("a").attr("href")),q=a.defaultIfBlank(f.title,"CustomerReviews"),q=""+q,k="";b.each({width:"500",height:"500",resizable:"1",
scrollbars:"1",toolbar:"0",status:"1"},function(b,c){var d=a.defaultIfBlank(f[c],b);k+=c+"="+d+","});var k=k.slice(0,-1),m=null;try{(m=l.open(e,q,k))?m.focus():c.logError("Unable to move focus to popup window with data: "+a.stringify(f),"ERROR"),d.$event.preventDefault()}catch(t){c.logError("Unable to open window with parameters: "+a.stringify(f),"FATAL",t)}return m}b.declarative("cr-popup",["click"],c.jsGuard(d));return{popup:d}});h.when("A","jQuery","reviews-constants","cr-ajax-model",
"cr-string-utils").register("cr-generic-declarative-actions",function(b,a,c,d,g){function f(b){q(b)&&b.data.selector&&b.data.cssClass&&(a(b.data.selector).toggleClass(b.data.cssClass),b.$event.preventDefault())}function e(c){if(q(c)&&c.data.url&&c.data.params){c.$event.preventDefault();b.declarative.remove(c.$currentTarget,m.AJAX_POST);c=c.data;var e=c.params,f=a(c.indicatorSelector)[0],g=k(a.fn.hide,c.hideOnSuccessSelector),h=k(a.fn.show,c.showOnFailureSelector);a(c.removeOnLoadSelector).remove();
d.post(c.url,{params:e,indicator:f,success:g,error:h})}}function q(a){return a&&a.data&&a.$event&&"function"===typeof a.$event.preventDefault}function k(b,c){if(c&&"function"===typeof b)return function(){var d=a(c);0<d.length&&b.call(d)}}var m=c.events;b.declarative(m.TOGGLE_CLASS_CLICK,"click",f);b.declarative(m.AJAX_POST,"click",e);return{toggleCssClass:f,ajaxPost:e}});h.when("A","ready").register("cr-global-model",function(b){var a=b.state("reviews-page-state");a||(a=b.$("#cr-state-object").data("state"));
var c=null;a&&(c=a.customerId);return{generateUrl:function(a,b){var c=a;c&&"/"!==c.charAt(c.length-1)&&(c+="/");c&&b&&(c=c+"ref="+b);return c},isSignedIn:function(){return c?!0:!1}}});h.when("A","a-expander","jQuery","reviews-constants","cr-string-utils").register("cr-global-view",function(b,a,c,d,g){function f(a){var b="";if(a&&a.closest!==p){var c=a.closest("*["+t.REFTAG+"]");c&&(b=c.attr(t.REFTAG))}g.isBlank(b)&&a&&a.closest!==p&&(a=a.closest("*[rel]"))&&(b=a.attr("rel"));return g.defaultIfBlank(b,
"cm_cr_unknown")}function e(a){return a&&"function"===typeof a.is?a.is("*["+t.getReviews.CHECKED+"]")&&a.is("*["+t.getReviews.UNCHECKED+"]"):!1}function q(a){return a&&a.has!==p&&a.is!==p?0<a.find(":checked").length||a.is(":checked"):!1}function k(a,b){return a&&a.attr!==p&&b?g.parseJSON(a.attr(b))||{}:{}}function m(a){return a!==p}var t=d.data;b.on("a:expander:review_text_read_more:toggle:collapse",function(a){m(a)&&m(a.expander)&&m(a.expander.$expander)&&1===a.expander.$expander.length&&m(a.expander.$expander[0].closest(".review"))&&
m(a.expander.$expander[0].closest(".review").offsetTop)&&(a=a.expander.$expander[0].closest(".review").offsetTop,l.scroll(0,a))});b.on("a:pageUpdate",function(){m(a)&&a.initializeExpanders()});return{getReviewsStateParamsFromElement:function(a){var c=b.reduce(t.getReviews,function(a,b){return a+"*["+b+"],"},"").slice(0,-1),d;c&&a&&a.closest!==p&&(d=a.closest(c));return e(d)?q(d)?k(d,t.getReviews.CHECKED):k(d,t.getReviews.UNCHECKED):k(d,t.getReviews.STANDARD)},getReftag:function(a){var b;a&&a.$target&&
(b=a.$target);a&&a.id&&(b=c("#"+a.id));a&&a.expander&&a.expander.$expander&&(b=a.expander.$expander);b=f(b);"cm_cr_unknown"===b&&a&&a.data&&a.data.reftag&&(b=a.data.reftag);return b},getReftagByDom:f,scrollTo:function(a,b){var d=c(a).offset(),e=b||0,f=c("#cr-state-object").data("state"),f=f!==p&&f.disableScroll;d&&d.top!==p&&!f&&(c("html,body").stop(),c("html,body").animate({scrollTop:d.top-e},{queue:!1,duration:500}))}}});h.when("A").register("cr-log-utils",function(b){function a(a,
b,c){l.ueLogError&&("string"!==typeof b&&(b="FATAL"),c?l.ueLogError(c,{message:a,logLevel:b.toUpperCase(),attribution:"CustomerReviewsJS"}):l.ueLogError({message:a},{logLevel:b.toUpperCase(),attribution:"CustomerReviewsJS"}))}function c(a,b){return"string"===typeof b?b+a:"CustomerReviews:"+a}return{logError:a,jsGuard:function(b){if("function"===typeof b)return function(){try{return b.apply(this,arguments)}catch(c){a("Uncaught Error in function","FATAL",c)}};a("Unable to wrap non-function","ERROR");
return b},incrementCount:function(a,b){if(l.ue){var f=c(a,b),e=l.ue.count(f)||0;l.ue.count(f,e+1)}},logCount:function(a,b,f){l.ue&&(a=c(a,f),l.ue.count(a,b))}}});h.register("cr-mash-utils",function(){var b=!1;h.when("mash").execute(function(){b=!0});return{isMash:function(){return b}}});h.when("A","cr-log-utils").register("cr-number-utils",function(b,a){return{convertToInteger:function(b,d){if(b===parseInt(b,10))return b;if(null!==b&&b!==p&&""!==b)return parseInt(b.replace(/[^0-9]/g,
""),10);if(d!==p)return d;a.logError("convertToInteger","Cannot convert "+b+" to Integer");return 0},isFiniteNumber:function(a){return"number"===typeof a&&!isNaN(a)&&isFinite(a)}}});h.when("cr-A","jQuery","cr-string-utils","afterReady").register("cr-on-view-utils",function(b,a,c){function d(a,c){if(!e[a]){var d=g(a,c)();q[a]=(q[a]||[]).concat(d);b.on.scroll(d)}}function g(c,d){return function u(){b.inView(a(c))&&(f(c,d),b.each(q[c]||[],function(a){b.off("scroll",a)}));return u}}function f(a,
c){e[a]||(e[a]=!0,b.post(c.ajaxUrl,{params:c.ajaxParamsMap||{}}))}var e={},q={};b.each(a("*[data-cr-trigger-on-view]"),function(b,e){var f=a(b),g=f.attr("data-cr-trigger-on-view"),g=c.parseJSON(g);if(null!==g){var q="cr-trigger-on-view-"+e;f.addClass(q);d("."+q,g)}});return{triggerOnScrollIntoView:d,trigger:f}});h.when("A","jQuery").register("cr-streaming-utils",function(b,a){return{appendFadeIn:function(c){if(null!==c&&2<c.length&&null!==c[1]&&null!==c[2]){var d=c[1];c=a(c[2]).hide();
a(d).append(c);b.fadeIn(c,500,"ease-in-out",function(){})}},replace:function(b){if(null!==b&&2<b.length&&null!==b[1]&&null!==b[2]){var d=b[2];a(b[1]).replaceWith(a(d))}}}});h.when("A","cr-log-utils").register("cr-string-utils",function(b,a){function c(a){return null===a||a===p?!0:0===b.trim(a).length}return{defaultIfBlank:function(a,b){return c(a)?b:a},isBlank:c,parseJSON:function(c){try{return b.parseJSON(c)}catch(g){a.logError("Unable to parse JSON object","ERROR",g)}return null},startsWith:function(a,
b){return a===b?!0:null===a||null===b?!1:0===a.indexOf(b)},stringify:function(a){return l.JSON&&l.JSON.stringify?l.JSON.stringify(a):a}}});h.when("A").register("cr-uri-utils",function(b){function a(a){a=a||l.location.href;var d={},g=a.indexOf("?"),f=a.indexOf("#");a=a.slice(g+1,f>g?f:p)||"";g=[];-1<a.indexOf("&")?g=a.split("&"):-1<a.indexOf("=")&&(g=[a]);b.each(g,function(a,b){if(0<a.indexOf("=")){var c=a.split("=");d[c[0]]=c[1]}});return d}return{getUrlParametersMap:a,addKeyValuePair:function(b,
d,g){g=g||0;if(a(b)[d]===g||!b||!d)return b;d="?"+d+"="+g;return-1<b.indexOf("?")?b.replace("?",d+"&"):b+d}}});h.when("A","cr-uri-utils","cr-string-utils","3p-urijs").register("cr-extended-uri-utils",function(b,a,c,d){function g(){return d(l.location.href)}function f(){return g().query()}return b.$.extend(a,{getCurrentUri:g,getCurrentQueryString:f,getCurrentQueryParameters:function(){return d.parseQuery(f())},isAmazonDomain:function(a){if("string"===typeof a||a instanceof String)a=d(a);
var b=c.startsWith(a.domain(),"amazon");!1===b&&(a=a.hostname(),a=a.substring(a.indexOf(".")+1),b=c.startsWith(a,"amazon"));return b},setQueryParameters:function(a,f){if("string"===typeof a||a instanceof String)a=d(a);b.each(f,function(b,d){c.isBlank(b)?a.removeSearch(d):a=a.setSearch(d,b)});return a},setReftag:function(a,b){if("string"===typeof a||a instanceof String)a=d(a);for(var f=a.segment(),g=!1,h=f.length-1;0<=h;h--)if(c.startsWith(f[h],"ref=")){g=!0;f[h]="ref="+b;break}g||f.push("ref="+b);
a.segment(f);return a}})});h.when("cr-A","jQuery","cr-log-utils","cr-string-utils","afterReady").register("cr-weblab-utils",function(b,a,c,d){function g(d,e,g,h){q[e]||(c.logCount(g,0,h),d=f(a(d),e,g,h)(),k[e]=(k[e]||[]).concat(d),b.on.scroll(d))}function f(a,c,d,f){return function y(){b.inView(a)&&(e(c,d,f),b.each(k[c]||[],function(a){b.off("scroll",a)}));return y}}function e(a,d,e){if(!q[a]){q[a]=!0;var f=b.$("#cr-state-object").data("state");b.post(f.weblabTriggerUrl,{params:{weblabId:a}});
c.logCount(d,1,e)}}var q={},k={};b.each(a("*[data-cr-weblab-trigger-on-scroll]"),function(b,c){var e=a(b),f=e.attr("data-cr-weblab-trigger-on-scroll"),f=d.parseJSON(f);if(null!==f){var k="cr-weblab-trigger-on-scroll-"+c;e.addClass(k);g("."+k,f.weblabId,f.metricName,f.prefix)}});return{triggerOnScrollIntoView:g,triggerWeblab:e}});h.when("A").register("histogram-trigger",function(b){function a(){b.onScreen(b.$("#histogramTable"))&&b.trigger("scroll")}b.on.afterLoad(a);return{triggerHistogram:a}})});
/* ******** */
(function(h){var l=window.AmazonUIPageJS||window.P,p=l._namespace||l.attributeErrors,b=p?p("CustomerReviewsAssets"):l;b.guardFatal?b.guardFatal(h)(b,window):b.execute(function(){h(b,window)})})(function(h,l,p){h.when("A","jQuery","a-dropdown","reviews-constants","cr-string-utils").register("cr-global-arp-view",function(b,a,c,d,g){function f(a,b){return q(a,b,"a-active","a-touch-select",[],["aria-checked"])}function e(a){return a&&a.has!==p&&a.is!==p?0<a.find(":checked").length||a.is(":checked"):!1}
function q(a,c,d,e,f,g){if(a&&c&&!c.hasClass(d)){var k=a.find("."+e);k.removeClass(d);b.each(f,function(a){k.removeClass(a)});c.addClass(d);b.each(g,function(a){k.attr(a,"false");c.attr(a,"true")});return!0}return!1}var k=d.data;return{clearTouchSelect:function(b){return f(b,a())},extractCSMCounterName:function(a){var b,c="",d;a&&"function"===typeof a.closest&&(d=a.closest("*["+k.CSM_COUNTER+"]"));d&&"function"===typeof d.attr&&(b=d.attr(k.CSM_COUNTER));a=(a=d)&&"function"===typeof a.is?a.is("*["+
k.getReviews.CHECKED+"]")&&a.is("*["+k.getReviews.UNCHECKED+"]"):!1;a&&(c=e(d)?":checked":":unchecked");return g.defaultIfBlank(b,"metricNotSpecified")+c},isChecked:e,setChecked:function(b,c){if(!b||"function"!==typeof b.find)return a();c=!0===c;var d="*[aria-checked]";b.find(d).add(b.filter(d)).attr("aria-checked",c);d="input";b.find(d).add(b.filter(d)).prop("checked",c);d=b.find(".a-icon.a-icon-touch-multi-select-active,.a-icon.a-icon-touch-multi-select");c?d.removeClass("a-icon-touch-multi-select").addClass("a-icon-touch-multi-select-active"):
d.removeClass("a-icon-touch-multi-select-active").addClass("a-icon-touch-multi-select");return b},setRadioSelected:function(a,b){return q(a,b,"a-button-selected","a-button",["a-button-focus"],["aria-checked"])},setSelectOption:function(a,b){var d=c.getSelect(a),e=!1;d&&(e=d.val(),d.getOptions().update({selected:"false"}),d.setValue(b),e=e!==b);return e},setTouchSelect:f}});h.when("A","reviews-content-view","reviews-content-model","reviews-filter-view","reviews-pagination-view","cr-log-utils",
"cr-extended-uri-utils","reviews-constants","a-expander","a-carousel-framework").register("reviews-content-controller",function(b,a,c,d,g,f,e,q,k,m){function t(a){d.setReviewerType(a);return c.setReviewerType(a)}function u(a){d.setFormatType(a);return c.setFormatType(a)}function n(a){d.setMediaType(a);return c.setMediaType(a)}function v(a){d.setFilterKeyword(a);return c.setFilterByKeyword(a)}function h(){return c.getSortOrder()}function l(a){d.setSortOrder(a);return c.setSortOrder(a)}function p(){return c.getStarFilter()}
function z(a){d.setStar(a);return c.setStarFilter(a)}function w(a){g.hasPaging()&&g.updateSelectedPage(a);return c.setPageNumber(a)}function x(){return c.getPageNumber()}function A(){return{sortBy:h(),reviewerType:c.getReviewerType(),formatType:c.getFormatType(),mediaType:c.getMediaType(),filterByStar:p(),pageNumber:x(),filterByKeyword:c.getFilterByKeyword()}}function r(a){var r=!1;a&&b.each({sortBy:l,reviewerType:t,formatType:u,mediaType:n,filterByStar:z,pageNumber:w,filterByKeyword:v},function(b,
c){c in a&&(r=b(a[c])||r)});d.afterSet(a);return r}function D(b){a.setLoading(!1);F();a.setLoadInProgress(!0)}function B(r){a.setLoading(!1);a.setLoadInProgress(!1);F();b.trigger(q.events.RELOAD_COMPLETE)}function H(r){a.setLoadInProgress(!1);a.showError(!0);c.setError(!0);a.clearContent();a.setLoading(!1);b.trigger(q.events.RELOAD_COMPLETE)}function F(){k.initializeExpanders();b.each(b.$(".reviews-initialize-ajax-carousel"),function(a,b){m.getCarousel(a)})}return{setSortOrder:l,setStarFilter:z,setPageNumber:w,
getSortOrder:h,getStarFilter:p,getPageNumber:x,getCurrentParameters:A,updateLinks:function(){var a=e.getCurrentUri(),r=b.$("*["+q.data.getReviews.STANDARD+"]");b.each(r,function(r,c){var d=b.$(r),f=b.parseJSON(d.attr(q.data.getReviews.STANDARD)),g=d.attr(q.data.REFTAG),f=e.setQueryParameters(a,f),f=e.setReftag(f,g);d.is("a")&&d.attr("href",f);d.find("a").attr("href",f)})},reloadReviews:function(d,e){if(b.objectIsEmpty(e))return!1;var g=r(e),m=c.getError();if(g||m)m=A(),e&&(m.shouldAppend=e.shouldAppend,
m.deviceType=e.deviceType),b.trigger(q.events.RELOAD),f.incrementCount("reviewsReload"),a.setLoadInProgress(!1),a.showError(!1),c.setError(!1),a.setLoading(!0),m.reftag=d,c.getReviews(m,D,B,H),a.scroll();return g}}});h.when("A","reviews-constants","ready").register("reviews-content-view",function(b,a){function c(a){var c={};c.winTop=b.$(l).scrollTop();c.browserHeight=Math.max(document.documentElement.clientHeight,l.innerHeight||0);a&&(c.start=a.offset().top,c.end=c.start+a.height());
return c}var d=a.aui.HIDDEN,g=b.$(".review-views");b.$("#reviews-summary");var f=b.$(".reviews-loading"),e=b.$(".reviews-load-progess"),q=b.$(".review-filter-error"),k=b.$("#reviews-filter-bar");return{clearContent:function(){g.html("")},setLoadInProgress:function(a){e.toggleClass(d,!a)},setLoading:function(a){f.toggleClass(d,!a)},showError:function(a){q.toggleClass(d,!a)},scroll:function(){if(k.length){clearInterval(null);var d=c(k);b.$("html,body").stop();b.$("html,body").animate({scrollTop:d.start},
{queue:!1,duration:200,complete:function(){b.trigger(a.events.AUTOSCROLL_COMPLETE)}})}else b.trigger(a.events.AUTOSCROLL_COMPLETE)}}});h.when("A","cr-global-model","cr-ajax-model","reviews-constants","cr-extended-uri-utils","3p-urijs","cr-number-utils","ready").register("reviews-content-model",function(b,a,c,d,g,f,e){function q(a){return function(){x=!1;if("function"===typeof a)return a.apply(this,arguments)}}d=f.parseQuery(g.getCurrentUri().query());var k=d.sortBy||d.s||"",m=d.filterByStar||
d.filterBy||"",t=e.convertToInteger(d.pageNumber,1),u=d.reviewerType||"",n=d.formatType||"",v=d.mediaType||"",h=d.filterByKeyword||"",l=!1;b=b.$("#cr-state-object").data("state");var p=b.reviewsAjaxUrl,z=b.asin,w=b.deviceType,x=!1;return{getReviewerType:function(){return u},setReviewerType:function(a){var b=u!==a;u=a;return b},getError:function(){return l},setError:function(a){var b=l!==a;l=a;return b},getFormatType:function(){return n},setFormatType:function(a){var b=n!==a;n=a;return b},getMediaType:function(){return v},
setMediaType:function(a){var b=v!==a;v=a;return b},getFilterByKeyword:function(){return h},setFilterByKeyword:function(a){var b=h!==a;h=a;return b},getSortOrder:function(){return k},setSortOrder:function(a){var b=k!==a;k=a;return b},getStarFilter:function(){return m},setStarFilter:function(a){var b=m!==a;m=a;return b},setPageNumber:function(a){a=e.convertToInteger(a,1);var b=a!==t;t=a;return b},getPageNumber:function(){return t||1},getReviews:function(b,r,d,e){x&&c.abort(x);var f=a.generateUrl(p,
b.reftag);b.deviceType=w;b.pageSize=10;b.asin=z;b.filterByKeyword=b.filterByKeyword||"";x=c.post(f,{params:b,attribution:"getReviews",success:q(d),error:q(e),chunk:function(a){"loaded"===a[0]&&r()}})}}});h.when("A","jQuery","reviews-filter-view","reviews-pagination-view","cr-global-view","cr-global-arp-view","reviews-content-controller","reviews-history-controller","reviews-constants","cr-log-utils","cr-string-utils").register("reviews-filter-controller",function(b,a,c,d,g,f,e,q,k,m,
t){function u(a,b,c,d){try{var f=e.reloadReviews(b,a),g=!1;(d=d&&f)&&c?g=q.push(b):d&&(g=q.replace(b));g&&e.updateLinks()}catch(u){throw m.logError("Unable to update reviews with reftag: "+b+" and params: "+t.stringify(a),"ERROR"),u;}}function n(a){b.each(a,function(a,b){A[b]=a});return A}function v(b){return b&&b.$target?b.$target:b&&b.nativeItemNode?a(b.nativeItemNode):a()}function l(a,b){p(v(a),b)}function p(a,c){var d=g.getReftagByDom(a),e=g.getReviewsStateParamsFromElement(a),f=!b.$("#cr-state-object-msrp").data("state");
u(e,d,c,f)}function E(a){var b=a.$target;a=g.getReftag(a);var c=1;b.is("a")&&(d.isPrevButton(b)?(c=e.getPageNumber()-1,a=a+"_prev_"+c):d.isNextButton(b)?(c=e.getPageNumber()+1,a=a+"_next_"+c):(c=d.extractPageNumber(b),a=a+"_"+c),null===c||isNaN(c)||(c=Math.max(c,1),b=[],b.pageNumber=c,u(b,a,!0,!0)))}function z(a){a=g.getReftag(a);var b=[];b.filterByKeyword=c.getFilterKeyword();b.pageNumber=1;u(b,a,!0,!0)}var w=k.events,x=k.filterOptions,A={};q.historySupported()&&(b.declarative(w.FILTER_PUSH,"click",
m.jsGuard(function(a){l(a,!0);a.$event.preventDefault()})),b.declarative(w.PAGINATION,"click",m.jsGuard(function(a){E(a);a.$event.preventDefault()})));b.declarative(w.FILTER_REPLACE,"click",m.jsGuard(function(a){l(a,!1);a.$event.preventDefault();a&&a.data&&a.data.scrollToSelector&&g.scrollTo(a.data.scrollToSelector,0)}));b.declarative(w.SEARCH_TEXTBOX,"keypress",m.jsGuard(function(a){a.$event.which===k.keycodes.ENTER&&z(a)}));b.declarative(w.SEARCH_BUTTON,"click",m.jsGuard(function(a){z(a)}));b.declarative(w.FILTER_AGGREGATE,
"click",m.jsGuard(function(a){var d=v(a),e=g.getReviewsStateParamsFromElement(d),d=f.extractCSMCounterName(d);m.incrementCount(d);e=n(e);d={};d[x.STAR_KEY]=c.setStar;d[x.FORMAT_KEY]=c.setFormatType;d[x.AVP_KEY]=c.setReviewerType;d[x.MEDIA_KEY]=c.setMediaType;b.each(d,function(a,b){b in e&&a(e[b])});c.afterSet(e);a.$event.preventDefault()}));b.declarative(w.FILTER_FIRE_AGGREGATE,"click",m.jsGuard(function(a){c.bindAfterFilterOptionsExit(function B(b){b=g.getReftagByDom(a.$target);u(A,b,!1,!0);c.unbindAfterFilterOptionsExit(B)});
c.dismissFilterOptions()}));b.on(w.FILTER_FIRE_UPDATE,m.jsGuard(function(a,b){l(a,b)}));h.when("mash").execute(function(c){b.on.scroll(m.jsGuard(function(){var c=a(".cm-cr-show-more");b.onScreen(c)&&(p(c.find("a"),!1),c.remove())}))});b.on(w.RELOAD_COMPLETE,m.jsGuard(d.loadPaginationDom));c.bindAfterFilterOptionsExit(function(){A={}});return{filterClick:l,pagingClick:E,keywordSearch:z}});h.when("A","cr-global-arp-view","reviews-constants","ready").register("reviews-filter-view",function(b,
a,c){var d=c.filterOptions,g=c.events,f=b.$("#sort-order-dropdown"),e=b.$("#reviewer-type-dropdown"),q=b.$("#star-count-dropdown"),k=b.$("#format-type-dropdown"),m=b.$("#media-type-dropdown"),t=b.$("#filterByKeywordTextBox");b.on("a:dropdown:sort-order-dropdown:select",function(a){b.trigger(g.FILTER_FIRE_UPDATE,a,c.PUSH_STATE)});b.on("a:dropdown:reviewer-type-dropdown:select",function(a){b.trigger(g.FILTER_FIRE_UPDATE,a,c.PUSH_STATE)});b.on("a:dropdown:format-type-dropdown:select",function(a){b.trigger(g.FILTER_FIRE_UPDATE,
a,c.PUSH_STATE)});b.on("a:dropdown:star-count-dropdown:select",function(a){b.trigger(g.FILTER_FIRE_UPDATE,a,c.PUSH_STATE)});b.on("a:dropdown:media-type-dropdown:select",function(a){b.trigger(g.FILTER_FIRE_UPDATE,a,c.PUSH_STATE)});return{afterSet:function(){},bindAfterFilterOptionsExit:function(){},dismissFilterOptions:function(){},getFilterKeyword:function(){return t.val()},setFilterKeyword:function(a){a||(a="");return b.equals(t.val(),a)?!1:t.val(a)},setFormatType:function(b){b||(b=d.ALL_FORMATS);
return a.setSelectOption(k,b)},setReviewerType:function(b){b||(b=d.ALL_REVIEWS);return a.setSelectOption(e,b)},setMediaType:function(b){b||(b=d.ALL_CONTENTS);return a.setSelectOption(m,b)},setSortOrder:function(b){b?b===d.LEGACY_HELPFUL?b=d.HELPFUL:b===d.LEGACY_RECENT&&(b=d.RECENT):b=d.HELPFUL;return a.setSelectOption(f,b)},setStar:function(b){b?"addOneStar"===b?b=d.ONE_STAR:"addTwoStar"===b?b=d.TWO_STAR:"addThreeStar"===b?b=d.THREE_STAR:"addFourStar"===b?b=d.FOUR_STAR:"addFiveStar"===b&&(b=d.FIVE_STAR):
b=d.ALL_STARS;return a.setSelectOption(q,b)},unbindAfterFilterOptionsExit:function(){}}});h.when("A","cr-string-utils","cr-number-utils","ready").register("reviews-pagination-view",function(b,a,c){var d,g,f,e;function q(){d=b.$("ul.a-pagination");g=d.find("li.page-button");f=d.find("li:first");e=d.find("li:last");d.find(".lower-page-dots");d.find(".upper-page-dots")}function k(){return 0!==d.length}e=f=g=d=void 0;q();return{extractPageNumber:function(a){var b,d;a.is("a")?(b=a.parent(),
d=a):a.is("li")&&(b=a,d=a.children("a"));return b.hasClass("page-button")?c.convertToInteger(d.html(),1):null},hasPaging:k,isNextButton:function(a){var b=a;b.is("a")&&(b=a.parent());return b[0]===e[0]},isPrevButton:function(a){var b=a;b.is("a")&&(b=a.parent());return b[0]===f[0]},loadPaginationDom:q,updateSelectedPage:function(e){if(!k())return!1;if(null===e||e===p)e=1;e=c.convertToInteger(e,1);1>e&&(e=1);var f;a:{if(k()&&(f=d.find("li.a-selected").find("a").html(),!a.isBlank(f))){f=c.convertToInteger(f,
1);break a}f=null}for(var q=g,n=0;n<q.length;n++){var v=b.$(q[n]);c.convertToInteger(v.find("a").html(),1)===e?v.addClass("a-selected"):v.removeClass("a-selected")}return f!==e}}});h.when("A","reviews-content-controller","cr-mash-utils","cr-extended-uri-utils","cr-log-utils").register("reviews-history-controller",function(b,a,c,d,g){function f(){var a=d.getCurrentUri(),c=b.state("reviews-page-state");c||(c=b.$("#cr-state-object").data("state"));a=d.isAmazonDomain(a);return c&&b.capabilities.history&&
a}function e(a){return c.isMash()?l.location.href:a}function q(c,e,g){var m;m=d.getCurrentUri();g&&(m=d.setReftag(m,g));g=a.getCurrentParameters();g.pageNumber=String(g.pageNumber);m=d.setQueryParameters(m,g);d.getCurrentUri();return f()?b.equals(history.state,a.getCurrentParameters())?!1:(c(m),k(),!0):(e(m),!0)}function k(){if(l.navbar&&l.navbar.update)try{l.navbar.update()}catch(a){g.logError("Unable to update navbar's url, ","ERROR",a)}}function m(b){a.reloadReviews("cm_cr_othr_unkn_js_nav",history.state)&&
a.updateLinks();k()}f()&&(l.onpopstate=m,history.replaceState(a.getCurrentParameters(),null,l.location.href));b.on("reviews:content-reload-complete",g.jsGuard(function(){if(b.$("#cr-state-object-msrp").data("state")){var c=b.$("#cr-state-object-msrp").data("state");if(c){var e=c.baseUri,e=d.setReftag(e,c.refTag),c=a.getCurrentParameters(),e=d.setQueryParameters(e,c);history.replaceState(a.getCurrentParameters(),null,e)}}}));return{push:function(b){return q(function(b){b=e(b);history.pushState(a.getCurrentParameters(),
null,b)},function(a){l.location.href=a},b)},replace:function(b){return q(function(b){b=e(b);history.replaceState(a.getCurrentParameters(),null,b)},function(a){},b)},historySupported:f}})});
/* ******** */
(function(h){var l=window.AmazonUIPageJS||window.P,p=l._namespace||l.attributeErrors,b=p?p("CustomerReviewsVotingAssets"):l;b.guardFatal?b.guardFatal(h)(b,window):b.execute(function(){h(b,window)})})(function(h,l,p){h.when("A","vote-model","vote-view","a-modal").register("vote-controller",function(b,a,c,d){function g(a,b){f(a,b);c.showElementByCssSelector(a,b.inFlight)}function f(a,b){c.hideElementByCssSelector(a,b.hideVoteComponents);b.hideAbuseComponents&&c.hideElementByCssSelector(a,b.hideAbuseComponents)}
function e(e,h){h.isReportAbuse&&(e=b.$("#mobile-abuse-"+h.voteInstanceId),d.get(e).hide());g(e,h.cssSelectors);a.submitVote(h.ajaxUrl,h.voteValue,h.voteInstanceId,h.csrfT,h.voteDimension,function(a){if(!0===a){a=e;var b=h.cssSelectors;f(a,b);c.showElementByCssSelector(a,b.onSuccess)}else a=e,b=h.cssSelectors,f(a,b),c.showElementByCssSelector(a,b.onError)},function(){var a=e,b=h.cssSelectors;f(a,b);c.showElementByCssSelector(a,b.onError)})}b.declarative("reviews:vote-action","click",function(a){e(a.$target,
a.data);a.$event.preventDefault()});return{submitVote:e}});h.when("A","cr-ajax-model").register("vote-model",function(b,a){return{submitVote:function(b,d,g,f,e,h,k){a.post(b,{params:{voteInstanceId:g,voteValue:d,csrfT:f,voteDimension:e},attribution:"submitVote",success:h,error:k})}}});h.when("A").register("vote-view",function(b){function a(a,b){return a.closest(".cr-vote").find(b)}return{hideThankYouAlert:function(b){a(b,".cr-vote-success").addClass("aok-hidden")},showThankYouAlert:function(b){a(b,
".cr-vote-success").removeClass("aok-hidden")},showErrorAlert:function(b){a(b,".cr-vote-error").removeClass("aok-hidden")},showFeedback:function(b){a(b,".cr-vote-feedback").removeClass("aok-hidden")},hideFeedback:function(b){a(b,".cr-vote-feedback").addClass("aok-hidden")},hideButtons:function(b){a(b,".cr-vote-buttons").addClass("aok-hidden")},hideElementByCssSelector:function(b,d){a(b,d).addClass("aok-hidden")},showElementByCssSelector:function(b,d){a(b,d).removeClass("aok-hidden")}}})});
/* ******** */
(function(h){var l=window.AmazonUIPageJS||window.P,p=l._namespace||l.attributeErrors,b=p?p("CustomerReviewsGalleryAssets"):l;b.guardFatal?b.guardFatal(h)(b,window):b.execute(function(){h(b,window)})})(function(h,l,p){h.when("A","load").register("review-image-asset-loader",function(b){var a=!1;b.ajax("/gp/customer-reviews/aj/private/reviewsGallery/get-image-gallery-assets",{method:"post",success:function(b){h.load.css(b.reviewsLightboxCSS);var d=document.createElement("script");d.type="text/javascript";
d.async=!0;d.setAttribute("crossorigin","anonymous");d.src=b.reviewsLightboxJS;document.getElementsByTagName("head")[0].appendChild(d);a=!0;h.register("review-image-assets-loaded",{})},error:function(){var a;a="/gp/customer-reviews/aj/metrics/log-values?noCache="+(new Date).getTime();a+="&SimpleStack:ReviewImageAssetLoaderFailure=1";l.Image&&((new Image).src=a)}});return{isLoaded:function(){return a}}});h.when("A","jQuery","cr-log-utils","reviews-constants","review-image-assets-loaded").register("review-image-binder",
function(b,a,c,d){function g(b,d,e,g,l){if(!(b&&d&&e instanceof a&&g instanceof a&&l instanceof a))return c.logError("Invalid parameters for imageBinder.initializeEventHandlers with ASIN: "+b+", galleryName: "+d+", $popoverTrigger: "+e+", $thumbnails: "+g+", $galleryLink: "+l,"FATAL"),!1;var q="reviewsLightbox-ready-"+d;g.click(function(){f(b,d);var c=g.index(this);e.click();h.when(q).execute(function(){a("#"+d).trigger("jumpToImageAtIndex",c)})});l.click(function(){f(b,d);e.click();h.when(q).execute(function(){a("#"+
d).trigger("hideImmersiveView")})});return!0}function f(a,b){if(!a||!b)return c.logError("Invalid parameters for imageBinder.initializeImageGallery with ASIN: "+a+", galleryName: "+b,"FATAL"),!1;if(e)return!0;(new ReviewsLightbox(b,"DESKTOP")).initializeForAsin(a);return e=!0}var e=!1,l={};h.when("reviewsLightbox-js").execute(function(){var b=a("#reviews-image-gallery-container"),c=b.attr("data-asin");0<b.length&&c&&g(c,"reviews-image-gallery",b.find(".a-popover-trigger"),b.find(".review-image-tile"),
b.find(".reviews-image-gallery-link"))});b.on(d.events.RELOAD_COMPLETE,function(){l={}});return{bindReview:function(b,c,d){var e=new ReviewGallery(d,"DESKTOP"),f=a("#"+c);f.find(".review-image-tile").each(function(c){a(this).click(function(){l[b]||(e.initializeForReview(b),l[b]=!0);f.find(".a-popover-trigger").click();h.when("reviewsLightbox-ready-"+d).execute(function(){e.render();e.showImageAtIndex(c)})})})},initializeImageGallery:f,initializeEventHandlers:g}});h.when("A","jQuery",
"cr-video-model","cr-video-view","reviews-constants").register("cr-video-controller",function(b,a,c,d,g){function f(){b.each(a(".review-views .review"),function(a){a&&a.id&&(a=c.getEmbedInfo(a.id))&&(c.isAiryLoaded()||c.loadAssets(),d.embedVideo(a))})}b.on(g.events.RELOAD_COMPLETE,function(){f()});f();return{initAll:f}});h.when("jQuery").register("cr-video-model",function(b){var a=!1;return{getEmbedInfo:function(a){var d="video-block-"+a,g=b("#"+a+" .video-url").val(),f=b("#"+a+" .video-slate-img-url").val(),
e=b("#cr-video-swf-url").val();return a&&g&&e?{videoDomId:d,videoUrl:g,videoSlateImgUrl:f,videoSwfUrl:e}:!1},isAiryLoaded:function(){return a},loadAssets:function(){var c=b("#cr-airy-js-source-url").val(),d=b("#cr-airy-css-source-url").val();"string"===typeof c&&"string"===typeof d&&(h.load.js(c),h.load.css(d));a=!0}}});h.when("jQuery","afterLoad").register("cr-video-view",function(b){return{embedVideo:function(a){h.when("Airy").execute(function(b){b.embed({parentId:a.videoDomId,streamingUrls:[a.videoUrl],
slateImages:{preloadSlate:a.videoSlateImgUrl},swfUrl:a.videoSwfUrl,desiredMode:"html"})})}}})});
/* ******** */
(function(h){var l=window.AmazonUIPageJS||window.P,p=l._namespace||l.attributeErrors,b=p?p("CustomerReviewsCommentAssets"):l;b.guardFatal?b.guardFatal(h)(b,window):b.execute(function(){h(b,window)})})(function(h,l,p){h.when("A","review-comment-view","review-comment-model","cr-global-view","cr-global-model").register("review-comment-controller",function(b,a,c,d,g){return{editCommentAreaKeyUp:function(b){0<a.getCommentTextAreaValue(b).length?a.hideNoTextError(b):a.showNoTextError(b)},editLinkClick:function(b){a.showEditSection(b);
a.hideEditLink(b)},cancelEditCommentClick:function(b){a.hideEditSection(b)},submitEditButtonClick:function(b,e){e.$event.preventDefault();if(!a.isSubmitting(b))if(a.hideSubmitError(b),0===a.getCommentTextAreaValue(b).length)a.showNoTextError(b);else if(a.getCommentTextAreaValue(b)!==a.getDisplayedCommentText(b)){a.setSubmitting(b,!0);var q=a.getCsrfT(b),k=d.getReftag(e),m=b.find(".submit-comment-button").find("a").attr("href"),k=g.generateUrl(m,k),m=null;a.hasReplyLine(b)&&(m=a.getReplyLineTimeElement(b),
m=d.getReviewsStateParamsFromElement(m),m={author:a.getReplyLineAuthor(b),text:a.getReplyLineText(b),timeAgoUnit:m.timeAgoUnit,timeAgoMagnitude:m.timeAgoMagnitude});c.submitEditedComment(a.getCommentId(b),a.getCommentTextAreaValue(b),q,k,function(c){c&&!1!==c&&"false"!==c?a.replace(b,c):a.showSubmitError(b);a.setSubmitting(b,!1)},function(c){a.showSubmitError(b);a.setSubmitting(b,!1)},m)}else a.showCommentText(b),a.showEditLink(b),a.setSubmitting(b,!1)},deleteButtonClick:function(b,e){e.$event.preventDefault();
var q=a.getCsrfT(b),k=d.getReftag(e),m=b.find(".delete-comment-button [href], .delete-comment-button[href]").first().attr("href"),k=g.generateUrl(m,k);a.isSubmitting(b)||(a.hideSubmitError(b),a.setSubmitting(b,!0),c.deleteComment(a.getCommentId(b),q,k,function(c){c&&!1!==c&&"false"!==c?a.replace(b,c):a.showSubmitError(b);a.setSubmitting(b,!1)},function(c){a.showSubmitError(b);a.setSubmitting(b,!1)}))}}});h.when("A","review-comment-list-view","review-comment-list-model","review-comment-controller",
"cr-global-view","cr-streaming-utils","reviews-constants","cr-weblab-utils","cr-global-model").register("review-comment-list-controller",function(b,a,c,d,g,f,e,q){function k(a){return a.$target.closest(".review-comment")}function m(b){var c=G(b);if(!b.$target.hasClass("a-selected")&&!a.isLoading(c))if(a.toggleSortOrder(c),B(c))D(c);else{H(c,a.getCurrentComments(c));a.clearComments(c);I(c);var d=g.getReftag(b);F(c,d)}b.$event.preventDefault()}function t(c){c=G(c);a.hasPurchase(c)&&(0<b.trim(a.getTextAreaValue(c)).length?
a.hideNoTextError(c):a.showNoTextError(c))}function u(b,d){d&&d.length||(d=G(b));if(!a.isSubmitCommentButtonShown(d)){a.showSubmitCommentButton(d);var r=g.getReftag(b);c.isApprovedAuthor(r,function(b){"false"===b&&a.showNoPurchaseError(d)},function(a){})}}function n(b,c){c&&c.length||(c=G(b));a.hideOpenCommentSubmissionButton(c);a.showCommentSubmission(c);u(b,c)}function v(a){d.editCommentAreaKeyUp(k(a))}function h(a){d.editLinkClick(k(a))}function l(a){d.cancelEditCommentClick(k(a))}function E(a){d.submitEditButtonClick(k(a),
a)}function z(a){d.deleteButtonClick(k(a),a)}function w(b){var d=G(b),r=d,e=null,f=g.getReviewsStateParamsFromElement(b.$target);if(f&&f.parentMessageId!==p&&""!==f.parentMessageId)var d=b.$target.closest("[data-a-expander-name='review_comment_expander']"),r=k(b),B=a.getParentCommentTimeElement(r),B=g.getReviewsStateParamsFromElement(B),e={messageId:f.parentMessageId,author:a.getParentCommentAuthor(r),text:a.getParentCommentText(r),timeAgoUnit:B.timeAgoUnit,timeAgoMagnitude:B.timeAgoMagnitude};!a.hasPurchase(d)||
a.isUserBanned(d)||a.isSubmitting(r)||(0<a.getTextAreaValue(r).length?(a.setSubmitting(r,!0),a.hideCommentSubmitError(r),a.hidePottyMouthError(r),a.hideTextTooLongError(r),"oldest"===a.getSortOrder(d)&&(a.toggleSortOrder(d),D(d)),b=g.getReftag(b),f=a.getCsrfT(r),c.submitComment(a.getReviewId(d),a.getTextAreaValue(r),f,a.getCheckboxStatus(r),b,function(b){a.setSubmitting(r,!1);switch(b){case "":case "unknownError":a.showCommentSubmitError(r);break;case "notSignedInError":a.showCommentSubmitError(r);
break;case "userBannedError":a.showUserBannedError(r);break;case "prsFailedError":a.showNoPurchaseError(r);break;case "pottyMouthError":a.showPottyMouthError(r);break;case "textTooLongError":a.showTextTooLongError(r);break;default:a.showReviewCommentHeader(d),e&&x(d),a.prependComments(d,b),a.setTotalCount(d,a.getTotalCount(d)+1),a.clearTextArea(r),a.hideSubmitCommentButton(r),I(d)}},function(b){a.setSubmitting(r,!1);a.showCommentSubmitError(r)},e)):a.showNoTextError(r))}function x(b){a.scrollToComments(b)}
function A(b,c){if(0===a.getCurrentCount(b)){var d=g.getReftag(c);F(b,d)}}function r(a){var b=G(a),c=g.getReftag(a),d=g.getReviewsStateParamsFromElement(a.$target);F(b,c,d);a.$event.preventDefault()}function D(b){var c=a.getCurrentComments(b),d=B(b);a.setCurrentComments(b,d);H(b,c);J(b)}function B(b){b=a.getReviewId(b);return K[b]}function H(b,c){var d=a.getReviewId(b);K[d]=c}function F(b,d,r){if(0<a.getTotalCount(b)&&!a.isLoading(b)){a.setLoading(b,!0);a.hideCommentLoadError(b);a.hideShowMoreButton(b);
a.showReviewCommentHeader(b);var e=5,g=0,D=a.getReviewId(b),B=a.getNextPageToken(b);r&&(e=r.moreCommentsNum||5,g=r.pageIteration||0);c.getComments(a.getSortOrder(b),a.getCurrentCount(b),d,function(a){I(b)},function(c){a.setLoading(b,!1);a.showCommentLoadError(b);a.hideLastDivider(b)},function(c){a.setLoading(b,!1);a.showLastDivider(b);f.appendFadeIn(c);a.hideLastDivider(b)},e,g,D,B)}}function J(b){var c=a.getShownCommentCount(b),d=a.getNextPageToken(b);a.setCurrentCount(b,c);0!==c&&""!==d||a.hideShowMoreButton(b)}
function I(b){var c=a.getShownCommentCount(b);(c>a.getTotalCount(b)||c===a.getCurrentCount(b))&&a.setTotalCount(b,c);J(b)}function G(a){return a.expander?a.expander.$expander:a.$target.closest(".a-expander-container")}var K={};b.declarative(e.events.MORE_COMMENTS,"click",r);b.declarative(e.events.SORT_COMMENTS,"click",m);b.declarative(e.events.INPUT_COMMENT,"keyup",t);b.declarative(e.events.INPUT_COMMENT,"click",u);b.declarative(e.events.OPEN_SUBMISSION_COMMENT,"click",n);b.declarative(e.events.SUBMIT_COMMENT,
"click",w);b.declarative(e.events.EDIT_COMMENT,"click",h);b.declarative(e.events.SUBMIT_EDIT_COMMENT,"click",E);b.declarative(e.events.CANCEL_EDIT_COMMENT,"click",l);b.declarative(e.events.DELETE_COMMENT,"click",z);b.declarative(e.events.MODIFY_EDIT_COMMENT,"keyup",v);b.on("a:expander:review_comment_expander:toggle:expand",function(a){A(G(a),a);q.triggerWeblab("REVIEW_COMMENTS_71345","arp-comments-visible","")});b.on(e.events.RELOAD,function(){K={}});b.on.afterLoad(function(){var a=b.$(".a-icon-collapse").closest("[data-a-expander-name=review_comment_expander]");
a.length&&(A(a),a.find(".a-expander-content").hasClass("submission-open")&&n(null,a),x(a))});return{sortComments:m,commentAreaKeyUp:t,commentAreaClick:u,editCommentAreaKeyUp:v,editLinkClick:h,cancelEditClick:l,submitEditButtonClick:E,deleteButtonClick:z,submitButtonClick:w,scrollToComments:x,getTotalCount:function(b){return a.getTotalCount(b)},expandComments:A,showMore:r,toggleLastCommentView:D,getCachedComments:B,setCachedComments:H,loadNext:F,updateCurrentCommentCount:J,updateCommentCount:I,openCommentSubmissionClick:n}});
h.when("A","cr-global-model","cr-ajax-model").register("review-comment-list-model",function(b,a,c){var d=b.state("reviews-page-state");d||(d=b.$("#cr-state-object").data("state"));return{isApprovedAuthor:function(g,f,e){var q=b.state("reviews-cache-approvedAuthor");null===q?(g=a.generateUrl(d.approvedAuthorAjaxUrl,g),c.post(g,{params:{},success:function(a){b.state("reviews-cache-approvedAuthor",a);f(a)},error:e})):f(q)},getComments:function(b,f,e,q,k,m,t,u,n,v){t=Math.min(25,t);b={sortCommentsBy:b,
offset:f,count:t,pageIteration:u,asin:d.asin,reviewId:n,nextPageToken:v};e=a.generateUrl(d.reviewCommentsAjaxUrl,e);c.post(e,{params:b,success:q,error:k,chunk:function(a){"appendFadeIn"===a[0]&&m(a)}},2)},submitComment:function(b,f,e,q,k,m,t,u){b={reviewId:b,commentText:f,csrfT:e,isOfficial:q,parentMessageId:"",parentMessageText:"",parentMessageAuthor:"",parentMessageTimeAgoUnit:"",parentMessageTimeAgoMagnitude:""};null!==u&&(b.parentMessageId=u.messageId,b.parentMessageText=u.text,b.parentMessageAuthor=
u.author,b.parentMessageTimeAgoUnit=u.timeAgoUnit,b.parentMessageTimeAgoMagnitude=u.timeAgoMagnitude);k=a.generateUrl(d.reviewCommentSubmissionAjaxUrl,k);c.post(k,{params:b,success:m,error:t},2)}}});h.when("A","cr-number-utils","reviews-constants","cr-global-view").register("review-comment-list-view",function(b,a,c,d){function g(a){return!a.find(".comment-submission:first").hasClass(c.aui.HIDDEN)}function f(a){return a.find(".comment-text-area:first").find("textarea").val()}return{hideLastDivider:function(a){a.find(".comment-divider:last").addClass(c.aui.HIDDEN)},
showLastDivider:function(a){a.find(".comment-divider:last").removeClass(c.aui.HIDDEN)},hideShowMoreButton:function(a){a.find(".more-comments-button").addClass(c.aui.HIDDEN)},showShowMoreButton:function(a){a.find(".more-comments-button").removeClass(c.aui.HIDDEN)},prependComments:function(a,c){var d=b.$(c).hide();a.find(".review-comments").prepend(d);d.slideDown()},getCurrentComments:function(a){return a.find(".review-comments").html()},setCurrentComments:function(a,b){a.find(".review-comments").html(b)},
clearComments:function(a){a.find(".review-comments").html("")},getReviewId:function(a){return a.closest(".review").attr("id")},getShownCommentCount:function(a){return a.find(".review-comments").find(".review-comment").length},getCurrentCount:function(b){return a.convertToInteger(b.find(".review-comment-count").html(),0)},setCurrentCount:function(a,b){a.find(".review-comment-count").html(b)},getTotalCount:function(b){return a.convertToInteger(b.find(".review-comment-total").html(),0)},setTotalCount:function(a,
b){a.find(".review-comment-total").html(b)},isLoading:function(a){return!a.find(".comment-loading").hasClass(c.aui.HIDDEN)},setLoading:function(a,b){b?(a.find(".comment-loading").removeClass(c.aui.HIDDEN),a.find(".more-comments-button").addClass(c.aui.HIDDEN)):a.find(".comment-loading").addClass(c.aui.HIDDEN)},isSubmitting:function(a){return a.find(".submit-comment-button:first").hasClass("submitting")},setSubmitting:function(a,b){b?a.find(".submit-comment-button:first").addClass("submitting"):a.find(".submit-comment-button:first").removeClass("submitting")},
getSortOrder:function(a){if(a.find(".sort-newest").hasClass("a-selected"))return"newest";if(a.find(".sort-oldest").hasClass("a-selected"))return"oldest"},toggleSortOrder:function(a){a.find(".sort-newest").toggleClass("a-selected");a.find(".sort-newest").toggleClass("a-color-state");a.find(".sort-newest").children(":first").toggleClass("a-selected");a.find(".sort-newest").children(":first").toggleClass("a-color-state");a.find(".sort-oldest").toggleClass("a-selected");a.find(".sort-oldest").toggleClass("a-color-state");
a.find(".sort-oldest").children(":first").toggleClass("a-selected");a.find(".sort-oldest").children(":first").toggleClass("a-color-state")},showCommentLoadError:function(a){a.find(".comment-load-error:first").removeClass(c.aui.HIDDEN)},hideCommentLoadError:function(a){a.find(".comment-load-error:first").addClass(c.aui.HIDDEN)},getTextAreaValue:f,appendToTextArea:function(a,b){var c=f(a),c=c+b;a.find(".comment-text-area:first").find("textarea").val(c)},clearTextArea:function(a){a.find(".comment-text-area:first").find("textarea").val("")},
showNoTextError:function(a){a.find(".comment-no-text-error:first").removeClass(c.aui.HIDDEN);a.find(".comment-text-area:first").find("textarea").addClass("a-form-error")},hideNoTextError:function(a){a.find(".comment-no-text-error:first").addClass(c.aui.HIDDEN);a.find(".comment-text-area:first").find("textarea").removeClass("a-form-error")},showCommentSubmitError:function(a){a.find(".comment-submit-error:first").removeClass(c.aui.HIDDEN);a.find(".comment-text-area:first").find("textarea").addClass("a-form-error")},
hideCommentSubmitError:function(a){a.find(".comment-submit-error:first").addClass(c.aui.HIDDEN);a.find(".comment-text-area:first").find("textarea").removeClass("a-form-error")},showNoPurchaseError:function(a){a.find(".comment-prs-error:first").removeClass(c.aui.HIDDEN);a.find(".comment-text-area:first").find("textarea").addClass("a-form-error")},hasPurchase:function(a){return a.find(".comment-prs-error:first").hasClass(c.aui.HIDDEN)},showUserBannedError:function(a){a.find(".comment-banned-error:first").removeClass(c.aui.HIDDEN);
a.find(".comment-text-area:first").find("textarea").addClass("a-form-error")},isUserBanned:function(a){return!a.find(".comment-banned-error:first").hasClass(c.aui.HIDDEN)},showPottyMouthError:function(a){a.find(".comment-potty-mouth-error:first").removeClass(c.aui.HIDDEN);a.find(".comment-text-area:first").find("textarea").addClass("a-form-error")},hidePottyMouthError:function(a){a.find(".comment-potty-mouth-error:first").addClass(c.aui.HIDDEN);a.find(".comment-text-area:first").find("textarea").removeClass("a-form-error")},
hideSubmitCommentButton:function(a){a.find(".submit-comment-button:first").addClass(c.aui.HIDDEN)},showSubmitCommentButton:function(a){a.find(".submit-comment-button:first").removeClass(c.aui.HIDDEN)},isSubmitCommentButtonShown:function(a){return!a.find(".submit-comment-button:first").hasClass(c.aui.HIDDEN)},getCsrfT:function(a){return a.find("[name=csrfT]").val()},showReviewCommentHeader:function(a){a.find(".review-comments-header").removeClass(c.aui.HIDDEN)},hideReviewCommentHeader:function(a){a.find(".review-comments-header").addClass(c.aui.HIDDEN)},
scrollToComments:function(a){a=g(a)?".comment-submission:first":".open-comment-submission-button";d.scrollTo(a,50)},showCommentSubmission:function(a){a.find(".comment-submission:first").removeClass(c.aui.HIDDEN)},isCommentSubmissionShown:g,hideOpenCommentSubmissionButton:function(a){a.find(".open-comment-submission-button").addClass(c.aui.HIDDEN)},getParentCommentAuthor:function(a){return a.find(".author:first").html()},getParentCommentText:function(a){return a.find(".review-comment-text").html()},
getParentCommentTimeElement:function(a){return a.find(".comment-time-stamp")},getNextPageToken:function(a){a=d.getReviewsStateParamsFromElement(a.find(".review-comments").find(".review-comment").last());return a!==p&&null!==a&&a.nextPageToken!==p?a.nextPageToken:""},getCheckboxStatus:function(a){var b={value:!1};h.now("a-checkbox").execute(function(c){c=c(a.find(".cr-srp-official-comment-checkbox"));b.value=c.isChecked()});return b.value},showTextTooLongError:function(a){a.find(".comment-text-too-long-error:first").removeClass(c.aui.HIDDEN);
a.find(".comment-text-area:first").find("textarea").addClass("a-form-error")},hideTextTooLongError:function(a){a.find(".comment-text-too-long-error:first").addClass(c.aui.HIDDEN);a.find(".comment-text-area:first").find("textarea").removeClass("a-form-error")}}});h.when("A","cr-ajax-model").register("review-comment-model",function(b,a){return{submitEditedComment:function(b,d,g,f,e,q,k){b={commentId:b,commentText:d,csrfT:g,parentMessageText:"",parentMessageAuthor:"",parentMessageTimeAgoUnit:"",
parentMessageTimeAgoMagnitude:""};null!==k&&(b.parentMessageText=k.text,b.parentMessageAuthor=k.author,b.parentMessageTimeAgoUnit=k.timeAgoUnit,b.parentMessageTimeAgoMagnitude=k.timeAgoMagnitude);a.post(f,{params:b,success:e,error:q})},deleteComment:function(b,d,g,f,e){a.post(g,{params:{commentId:b,csrfT:d},success:f,error:e})}}});h.when("A","reviews-constants").register("review-comment-view",function(b,a){function c(a){return a.attr("id")}function d(a){a=c(a);return b.$("#commentParentPopoverContent-"+
a)}return{getCommentId:c,showEditSection:function(b){b.find(".review-comment-text").addClass(a.aui.HIDDEN);b.find(".edit-comment-section").removeClass(a.aui.HIDDEN)},hideEditSection:function(b){b.find(".review-comment-text").removeClass(a.aui.HIDDEN);b.find(".edit-comment-section").addClass(a.aui.HIDDEN)},showCommentText:function(b){b.find(".review-comment-text").removeClass(a.aui.HIDDEN);b.find(".edit-comment-section").addClass(a.aui.HIDDEN)},hideEditLink:function(b){b.find(".edit-comment-link").addClass(a.aui.HIDDEN)},
showEditLink:function(b){b.find(".edit-comment-link").removeClass(a.aui.HIDDEN)},getCommentTextAreaValue:function(a){return a.find("textarea").val()},getDisplayedCommentText:function(a){return a.find(".review-comment-text").html()},updateDisplayedCommentText:function(a,b){a.find(".review-comment-text").html(b)},isSubmitting:function(a){return a.find(".submit-comment-button").hasClass("submitting")},replace:function(a,c){var d=b.$(c).find(".review-comment").andSelf();a.html(d.html())},setSubmitting:function(a,
b){b?a.find(".submit-comment-button").addClass("submitting"):a.find(".submit-comment-button").removeClass("submitting")},showNoTextError:function(b){b.find(".edit-comment-no-text-error").removeClass(a.aui.HIDDEN);b.find("textarea").addClass("a-form-error")},hideNoTextError:function(b){b.find(".edit-comment-no-text-error").addClass(a.aui.HIDDEN);b.find("textarea").removeClass("a-form-error")},showSubmitError:function(b){b.find(".edit-comment-submit-error").removeClass(a.aui.HIDDEN);b.find("textarea").addClass("a-form-error")},
hideSubmitError:function(b){b.find(".edit-comment-submit-error").addClass(a.aui.HIDDEN);b.find("textarea").removeClass("a-form-error")},getCsrfT:function(a){return a.find("[name=csrfT]").val()},hasReplyLine:function(a){var b="[data-a-popover*='arpCommentParent-"+c(a)+"']";return 0<a.find(b).length},getReplyLineAuthor:function(a){return d(a).find(".review-parent-comment-author").html()},getReplyLineText:function(a){return d(a).find(".review-parent-comment-text").html()},getReplyLineTimeElement:function(a){return d(a).find(".comment-time-stamp")}}});
h.when("A","review-product-link-model","review-product-link-view","review-comment-list-view","reviews-constants","cr-global-view","cr-log-utils").register("review-product-link-controller",function(b,a,c,d,g,f,e){function q(a){var b=n(a),d=c.getTextFieldValue(b);!c.isProcessing(b)&&0<d.length&&(c.hideNotFoundSection(b),c.showSpinner(b),setTimeout(function(){m(b,d)},2E3))}function k(a,e){var g=n(a),m=f.getReviewsStateParamsFromElement(a.$target),k=m.parentId,m=m.asin,g=c.getProductTitle(g),
g="[[ASIN:"+m+" "+g+"]]",m=b.$("#"+k);d.appendToTextArea(m,g);e.get("insertProductLink-"+k).hide()}function m(b,d){var e=c.getTextFieldValue(b);if(e===d&&!c.isProcessing(b)){c.setProcessing(b,!0);var e=u(e),f=c.getParentId(b);1>e.length?t(b):a.getProductsByAsins(e.join(),f,function(a){c.setProcessing(b,!1);c.hideSpinner(b)},function(a){t(b)})}}function t(a){c.setProcessing(a,!1);c.hideSpinner(a);c.showNotFoundSection(a)}function u(a){var c=/([a-zA-Z0-9]{10})/g,d=[];if((a=null!==a?b.$.trim(a):!1)&&
0<a.length)for(var e=c.exec(a);e;)d.push(e[1]),e=c.exec(a);return d}function n(a){return a.$target.closest(".product-link-popover")}b.declarative(g.events.INPUT_PRODUCT_LINK,"keyup",q);h.when("a-modal").execute(function(a){b.declarative(g.events.SELECT_PRODUCT_LINK,"click",function(b){k(b,a)});b.on("a:popover:show:productLinkWhatsThis",function(a){e.incrementCount("arpProductLinkWhatsThis")})});return{getProductLink:q,selectProductLinkButtonClick:k,getPopoverDom:n,processTextChange:m}});
h.when("A","cr-ajax-model").register("review-product-link-model",function(b,a){return{getProductsByAsins:function(c,d,g,f){var e=b.$("#cr-state-object").data("state");a.post(e.productInfoUrl,{params:{asins:c,parentId:d},success:g,error:f})}}});h.when("A","reviews-constants").register("review-product-link-view",function(b,a){return{showSpinner:function(b){b.find(".product-link-spinner").removeClass(a.aui.HIDDEN)},hideSpinner:function(b){b.find(".product-link-spinner").addClass(a.aui.HIDDEN)},
showNotFoundSection:function(b){b.find(".product-link-not-found-section").removeClass(a.aui.HIDDEN)},hideNotFoundSection:function(b){b.find(".product-link-not-found-section").addClass(a.aui.HIDDEN)},getTextFieldValue:function(a){return a.find(".product-link-input").val()},getProductTitle:function(a){return a.find(".product-link-title").html()},isProcessing:function(a){return a.find(".product-link-input").hasClass("processing")},setProcessing:function(a,b){b?a.find(".product-link-input").addClass("processing"):
a.find(".product-link-input").removeClass("processing")},getParentId:function(a){return a.closest(".product-link-popover").attr("id").split("-")[1]}}})});
/* ******** */
(function(h){var r=window.AmazonUIPageJS||window.P,A=r._namespace||r.attributeErrors,a=A?A("AskAuiAssets"):r;a.guardFatal?a.guardFatal(h)(a,window):a.execute(function(){h(a,window)})})(function(h,r,A){h.when("jQuery","ready").execute(function(a){a("body").delegate(".askInlineWidget .cdShowLess, .askInlineWidget .cdReadMore","click touchstart",function(c){c.preventDefault();a(c.target).parents(".cdJSEnabledText").toggleClass("askShowMore")})});h.when("jQuery","load").execute(function(a){var c=a(".askSubHeader");
0<c.length&&!r.pageYOffset&&a("html, body").animate({scrollTop:c.offset().top},0)});h.when("jQuery","ready").execute(function(a){function c(){return a(r).scrollTop()+5>=a(document).height()-a(r).height()}function e(){c()&&b()}function d(){a("body").hasClass("allAnswersScrolling")?a(document).scroll(e):(a(".loadMoreAnswersMobile").show(),a(".loadMoreAnswersMobile").bind("touchstart click",b))}function b(){var k=a(".answersLoadingSpinner"),l=a(".loadMoreAnswersMobile"),h=a.trim(a(".askPage input[name=askQuestion]").val()),
m=a.trim(a(".askPage input[name=askSort]").val()),v=a(".askPage input[name=askLanguage]").val(),p=a(".askPage input[name=askAsin]").val(),h="/ask/answers/inline/"+h+"/"+f+"?pageSize=6&sort="+m+"&language="+v;p!==A&&(h+="&asin="+p);k.show();l.hide();a(".askMobileFailedToFetchMoreAnswers").hide();a(document).unbind("scroll",e);l.unbind("touchstart click",b);a.ajax({url:h,data:{},dataType:"html",cache:!1,timeout:2E3,success:function(e){k.hide();a(".askPage .answerBox").append(e);g&&(c()?b():g=!1);"true"===
a.trim(a("input[name=moreAnswersAfterPage"+f+"]").val())?d():a(".loadMoreAnswersMobile").hide();a(document).trigger("ajax:success");f+=1},error:function(){k.hide();a(".askMobileFailedToFetchMoreAnswers").show();d()}})}var g=!0,f=3;a("body").hasClass("allAnswersScrolling")&&(c()?b():g=!1,a(document).scroll(e));a(".loadMoreAnswersMobile").bind("touchstart click",b)});h.when("jQuery","ready").execute(function(a){var c=!0;a("body").delegate(".askQuestionForm","submit",function(d){d=a(d.currentTarget);
var b=d.find("[name='askQuestionText']"),g=b.val(),b=b.attr("placeholder");if("undefined"===typeof g||g.match(/^\s*$/)||g===b)return d.attr("class","askQuestionForm hasEmptyQuestion"),!1;if(c)return c=!1,b=e,g=0<=g.indexOf("?"),b(d,g),!1;d.attr("class","askQuestionForm");return!0});var e=function(a,b){b?a.trigger("submit"):a.attr("class","askQuestionForm hasBadQuestion")}});h.when("jQuery","ready").register("askPostQuestionValidation",function(a){function c(c){var f=a(c.currentTarget),h=b.val(),m=
b.attr("placeholder");a(".askError").hide();return"undefined"===typeof h||h.match(/^\s*$/)||h===m?(g.show(),c.stopImmediatePropagation(),!1):d?(d=!1,m=e,h=0<=h.indexOf("?"),m(f,h),c.stopImmediatePropagation(),!1):!0}function e(a,b){b?a.trigger("submit"):f.show()}var d=!0,b,g=a(".askEmptyQuestionError"),f=a(".askBadQuestionError");return{setup:function(a,f,d){b=d;a.delegate(f,"submit",c)}}});h.when("jQuery","askHuddlesControl","ready").execute(function(a,c){function e(d){var b="/ask/questions/inline/"+
a.trim(a(".askWidgetQuestions input.askAsin").val())+"/"+d;a.ajax({url:b,data:{},dataType:"html",cache:!1,timeout:5E3,success:function(b){a(".askInlineWidget .askFailedToFetchMoreQuestions").hide();a(".askInlineWidget .askLoadMoreQuestions").hide();a(".askInlineWidget .askMoreQandAResults").append(b);a(".askInlineWidget .askTopQandALoadMoreQuestions").hide();b=d+1;a(".askWidgetQuestions input.nextPage").val(b);b=document.getElementById("askInlineQuestionsPage-"+d);var f;if(f="undefined"!==typeof b&&
null!==b)f=b.getBoundingClientRect(),f=!(0<=f.top&&0<=f.left&&f.bottom<=(r.innerHeight||a(r).height())&&f.right<=(r.innerWidth||a(r).width()));if(f){f=0;do f+=b.offsetTop||0,b=b.offsetParent;while(b);b=f;a("html, body").animate({scrollTop:b},"slow")}c.initializeHuddlesLinks(a(".askInlineWidget .askMoreQandAResults"),"dp")},error:function(){a(".askInlineWidget .askFailedToFetchMoreQuestions").show()}})}a("body").delegate(".askInlineWidget .askSeeMoreQuestionsLink","click",function(a){e(2);a.preventDefault()});
a("body").delegate(".askInlineWidget .askLoadMoreQuestionsLink","click",function(c){var b=parseInt(a(".askWidgetQuestions input.nextPage").val(),10)||0;0<b&&(e(b),c.preventDefault())})});h.when("jQuery","ready").execute(function(a){function c(b){b=document.getElementById(b);var c;if(c="undefined"!==typeof b&&null!==b)c=b.getBoundingClientRect(),c=!(0<=c.top&&0<=c.left&&c.bottom<=(r.innerHeight||a(r).height())&&c.right<=(r.innerWidth||a(r).width()));if(c){c=0;do c+=b.offsetTop||0,b=b.offsetParent;
while(b);b=c;a("html, body").animate({scrollTop:b},"slow")}}function e(){var b=a(".askQuestionForm input.askAsin").val();return b&&0!==b.length?"?asin="+b:""}function d(f,d){if(f){var g=e();a.ajax({url:"/ask/answers/inline/"+f+"/"+d+g,data:{},dataType:"html",cache:!1,timeout:5E3,success:function(g){a(".askInlineWidget #failed-to-fetch-answers-"+f).hide();a(".askInlineWidget #askSeeAllAnswersLink-"+f).hide();a(".askInlineWidget .askCollapseAnswers-"+f).show();a(".askInlineWidget .askLoadMoreAnswersLink-"+
f).hide();a(".askInlineWidget #"+f).show();a(".askInlineWidget #"+f).append(g);b(f,d);c("askInlineAnswersPage-"+f+"-"+d)},error:function(){a(".askInlineWidget #failed-to-fetch-answers-"+f).show()}})}}function b(b,c){a(".askWidgetQuestions input.currentAnswersPage-"+b).val(c)}function g(f){c("question-"+f);setTimeout(function(){a(".askInlineWidget #"+f).empty();a(".askInlineWidget .askCollapseAnswers-"+f).hide();a(".askInlineWidget #failed-to-fetch-answers-"+f).hide();a(".askInlineWidget #askSeeAllAnswersLink-"+
f).show()},500);b(f,1)}a("body").delegate(".askInlineWidget .askWidgetSeeAllAnswersInline","click",function(b){var c=a(b.currentTarget).attr("data-questionId");d(c,1);b.preventDefault()});a("body").delegate(".askInlineWidget .askWidgetLoadMoreAnswersInline","click",function(b){var c=a(b.currentTarget).attr("data-questionId"),g=parseInt(a(".askWidgetQuestions input.currentAnswersPage-"+c).val(),10)||0;0<g&&(d(c,g+1),b.preventDefault())});a("body").delegate("input[name='collapse-to-most-helpful-answer']",
"click",function(b){b=a(b.currentTarget).attr("data-questionId");g(b)})});h.when("jQuery","ready").register("askAuthenticatedAjax",function(a){return{handler:function(c,e){var d=a(c.currentTarget),b=d.attr("action"),g=d.attr("method"),f=d.serializeArray(),k=d.attr("type"),b={url:b,type:g,data:f,dataType:k,timeout:e,beforeSend:function(b,c){c.dataType===A&&b.setRequestHeader("Accept","*/*;q=0.5, "+c.accepts.script);b.setRequestHeader("X-Requested-With","XMLHttpRequest");var f=a.Event("ajax:beforeSend");
d.trigger(f,[b,c]);if(!1!==f.result)d.trigger("ajax:send",b);else return!1},success:function(a,b,c){d.trigger("ajax:success",[a,b,c])},complete:function(a,b){d.trigger("ajax:complete",[a,b])},error:function(a,b,c){d.trigger("ajax:error",[a,b,c])}};if(!("withCredentials"in new XMLHttpRequest))return!0;b.xhrFields={withCredentials:!0};c.preventDefault();a.ajax(b)}}});h.when("jQuery","askAbstractLiveSearch","ready").register("askLiveSearch",function(a,c){return{setup:function(a,d,b){c.setup(a,d,b,"/ask/livesearch/search")}}});
h.when("askAbstractLiveSearch","ready").register("askDetailPageSearchLiveSearch",function(a){return{setup:function(c,e,d){a.setup(c,e,d,"/ask/livesearch/detailPageSearch/search")}}});h.when("jQuery","ready").register("askAbstractLiveSearch",function(a){function c(a){return"function"!==typeof a?function(){}:a}var e=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}();return{setup:function(d,
b,g,f){function k(){var b=q.val(),c=a.trim(b);clearTimeout(v);if(c!==p){null===x&&(x=e(),z.val(x));t=a(".askLiveSearchPageLoadId").val();if(null===t||""===t)t=e(),a(".askLiveSearchPageLoadId").val(t);u=a.trim(r.val());0===c.length?(E(),m&&m.abort(),x=p=null):b.match(/\w\W+$/)?l(c):v=setTimeout(function(){l(c)},500)}}function l(b){C();clearTimeout(v);m=a.ajax(f,{type:"GET",data:{query:b,asin:A,forumId:B,liveSearchSessionId:z.val(),liveSearchPageLoadId:a(".askLiveSearchPageLoadId").val(),searchSource:h(b),
askLanguage:a.trim(y.find("[name=askLanguage]").val())}}).done(w).fail(G);p=b}function h(a){var b=q.data("autocomplete");a="undefined"!==typeof b&&null!==b?b.getSearchSuggestions().includes(a):!1;return a?"typeAhead":u}var m,v,p,x=null,t=null,u=null,q=d.find(b),y=q.closest("form"),z=d.find(".askLiveSearchSessionId"),r=y.children("input[name=searchSource]"),A=a.trim(y.children("input.askAsin").val()),B=a.trim(y.children("input.askForumId").val()),u=a.trim(y.children("input[name=searchSource]").val()),
C=c(g.liveSearchStartCallback),w=c(g.liveSearchDoneCallback),E=c(g.liveSearchClearCallback),G=c(g.liveSearchFailCallback);d.undelegate(".livesearch").delegate(b,"keyup.livesearch input.livesearch",k);return k}}});h.when("A","ready").register("askAbstractDetailPageSearchPostQuestion",function(a){function c(b,c,f){a.get("/gp/customer-forum/dynamic-update/validate-post.html",{contentType:"json",params:{body:b,checkIsQuestion:1},success:function(a){a.hasError||a.content.isQuestion?c():f()},error:function(){c()}})}
var e=a.$,d={postQuestionTextInputSelector:"input",callbacks:{goodQuestion:function(){},badQuestion:function(){},emptyQuestion:function(){}}};return{setup:function(b,g){function f(){k.callbacks.badQuestion();l=!0}var k=e.extend(!0,{},d,g),l=!1;a.declarative(b,"click",function(){var a=e(k.postQuestionTextInputSelector).val();"undefined"===typeof a||a.match(/^\s*$/)?k.callbacks.emptyQuestion():l?k.callbacks.goodQuestion():-1===a.indexOf("?")?f():c(a,k.callbacks.goodQuestion,f)})}}});h.when("A","a-alert",
"ready").register("askAnswerSolicitationDeleteAnswer",function(a,c){function e(c){return a.$("#askDeleteAnswerSection-"+c.data.answerId)}return{setup:function(d){var b=a.$("#askPostAnswerFormSection-"+d),g=a.$("#askPostAnswerForm-"+d),f=a.$("#askPostAnswerResponse-"+d);a.declarative("ask-show-delete-answer-section","click",function(a){e(a).show()});a.declarative("ask-hide-delete-answer-section","click",function(a){e(a).hide()});a.declarative("ask-submit-delete-answer-form","click",function(d){d=d.data.answerId;
var e=a.$("#askDeleteAnswerForm-"+d),h=a.$("#askAnswerContentSection-"+d),m=a.$("#askUpdateAnswerSection-"+d),v=c("#askDeleteAnswerError-"+d);v.hide();m.hide();a.post(e.attr("action"),{withCredentials:!0,params:e.serializeArray(),indicator:a.$("#askDeleteAnswerSpinner-"+d),success:function(a,c,d){f.hide();h.hide();b.show();g.show()},error:function(a){v.html(a.http.responseText).show();m.show()}})})}}});h.when("jQuery","ready").register("askExpander",function(a){return{setup:function(c){c.delegate(".askExpanderContainer .askSeeMore",
"click",function(c){a(c.currentTarget).closest(".askExpanderContainer").addClass("askExpanderExpanded");c.preventDefault()});c.delegate(".askExpanderContainer .askSeeLess","click",function(c){a(c.currentTarget).parents(".askExpanderContainer").removeClass("askExpanderExpanded");c.preventDefault()})}}});h.when("A").register("askPreventEnterKey",function(a){a.declarative("ask-prevent-enter-key","keypress",function(a){13===a.$event.which&&a.$event.preventDefault()})});h.when("A","askUtils","ready").register("askPreventDoubleSubmit",
function(a,c){return{idempotentSetup:c.makeIdempotent(function(){var c=!1;a.declarative("ask-prevent-double-submit","submit",function(a){c&&a.$event.preventDefault();c=!0})})}});h.when("A","ready").register("askHuddlesControl",function(a){return{initializeHuddlesLinks:function(c,e){var d={};c.find(".askHuddlesUninitializedLink").each(function(b){b=a.$(this);var c=b.data("questionId");d[c]=b});var b=a.$.map(d,function(a,b){return b});0!==b.length&&a.$.ajax({url:"/ask/conversations/data",data:{questionId:b,
sourcePage:e},timeout:5E3,traditional:!0,success:function(b){if(b=a.$.parseJSON(b))a.$.each(b,function(b,c){if(c.questionId&&d[c.questionId]){var g=d[c.questionId];c.url&&(g.find("a").attr("href",c.url),g.removeClass("askHuddlesUninitializedLink"),c.chatboxParams&&a.declarative.create(g.find("a"),"render-huddles-chat",c.chatboxParams))}}),c.find(".askHuddlesUninitializedLink").remove()},complete:function(){a.trigger("ask:huddles-data:complete")}})},initializeChatbox:function(){h.when("A","huddles-chatbox").execute(function(a,
e){a.declarative("render-huddles-chat","click",function(d){e.renderHuddleChat(a.$.extend({},d.data,{showEmbedded:!1}));d.$event.preventDefault()})})}}});h.register("askCsmCounter",function(){function a(a){if("undefined"!==typeof a){var e=r.ue;if(e&&e.count){var d=e.count(a)||0;e.count(a,d+1)}}}return{logCounterMetric:a,logAddCounterMetric:function(a,e){if("undefined"!==typeof a){var d=r.ue;if(d&&d.count){var b=d.count(a)||0;d.count(a,b+e)}}},createRateLimitedCsmLogHandler:function(c){var e=!1;return function(){e||
(e=!0,setTimeout(function(){e=!1},300),a(c))}}}});h.when("A","askUtils","jQuery","ready").register("askPrefetchDetailPageSearchData",function(a,c,e){function d(){var b,c={};a.declarative("ask-detail-page-search-prefetch-click","click",function(f){var d=b||f.data.language;if(!c[d||"DEFAULT_KEY"]){f=f.data.asin;var e={};d&&(e.askLanguage=d);a.post("/ask/livesearch/detailPageSearch/search/prefetch/"+f,{params:e})}c[d||"DEFAULT_KEY"]=!0});a.declarative("ask-detail-page-search-prefetch-language-change",
"change",function(a){b=a.$target.val()})}return{setup:d,idempotentSetup:c.makeIdempotent(d)}});h.when("A","ready").register("askUtils",function(a){var c=a.$,e=[],d=[];return{makeIdempotent:function(a){var c=!1;return function(){c||(a.apply(this,arguments),c=!0)}},makeRateLimited:function(a,d){var f=!1,e=c.extend(!0,{},{minPeriodInMilliseconds:2E3},d);return function(){f||a.apply(this,arguments);f=!0;setTimeout(function(){f=!1},e.minPeriodInMilliseconds)}},idempotentDeclarative:function(b,c,f){function d(b,
c,f){var g;a.declarative(b,c,function(a){g===A&&(g=a.type);a.type===g&&f(a)})}var l=b+c;e[l]||("click touchstart"===c||"touchstart click"===c?d(b,c,f):a.declarative(b,c,f),e[l]=!0)},idempotentDeclarativeCreate:function(b,c){var f=b.selector+c;d[f]||(a.declarative.create(b,c),d[f]=!0)},goToUrl:function(a){r.location.href=a},defaultFunction:function(a){return"function"!==typeof a?function(){}:a},generateUUID:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}
return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}}});h.when("A","askCsmCounter","askUtils","ready").register("askLogClickCsm",function(a,c,e){return{idempotentSetup:function(){e.idempotentDeclarative("ask-log-click-csm","click touchstart",function(a){c.logCounterMetric(a.data.metricName)})}}});h.when("A","askUtils","ready").register("askFollowupQuestions",function(a,c){function e(a){var c="."+a.$target.closest(".askDPSearchSecondaryViewContent, .askBtfSearchViewContent, .askDPSearchViewContent, .askSearchPageContent").find("form:first").attr("class").split(" ")[0],
e;""!==b.trim(b(c).find(".askDPSearchTextInput").prop("outerHTML"))?(e=b(".askDetailPageSearchWidgetSection"),e.length&&(e=e.offset().top,b("html, body").animate({scrollTop:e},"slow")),e=".askDPSearchTextInput"):""!==b.trim(b(c).find(".askBtfSearchTextInput").prop("outerHTML"))?(e=b(".askInlineWidget"),e.length&&(e=e.offset().top,b("html, body").animate({scrollTop:e},"slow")),e=".askBtfSearchTextInput"):""!==b.trim(b(c).find(".askSearchTextInput").prop("outerHTML"))&&(e=".askSearchTextInput");e=b(e+
" input, input"+e);e.val("").trigger("input");var l=b(c+" [name=followupSearchSource]").val();d(c,l);a=b.trim(a.$currentTarget.text());e.val(a).trigger("input")}function d(a,c){var d=b(a),e=d.siblings(".askPostQuestionForm");d.add(e).find("[name=searchSource]").val(c)}var b=a.$;return{idempotentSetup:function(){c.idempotentDeclarative("ask-click-followup-question","click",e)},resetSWDPSearchSource:function(a){var c=b(a+" [name=originalSearchSource]").val();d(a,c)}}});h.when("A","askUtils","ready").register("askLanguageFilterPageReload",
function(a,c){return{idempotentSetup:c.makeIdempotent(function(){a.declarative("ask-page-reload-on-language-filter-change","change",function(a){a=a.$currentTarget.find("option:selected").data("url");c.goToUrl(a)})})}});h.when("A","askUtils","ready").register("askLanguageFilterAjaxReload",function(a,c){function e(a){d(b).replaceWith(a);g.callbacks.reloadSuccess()}var d=a.$,b,g,f={callbacks:{reloadStart:function(){},reloadSuccess:function(){},reloadError:function(){}}};return{idempotentSetup:c.makeIdempotent(function(c,
l){g=d.extend(!0,{},f,l);b=c;a.declarative("ask-btf-ajax-reload-on-language-filter-change","change",function(a){a={url:a.$currentTarget.find("option:selected").data("url"),method:"GET",accepts:"text/html",beforeSend:function(){g.callbacks.reloadStart()},success:e,error:function(a,b){g.callbacks.reloadError()}};d.ajax(a)})})}});h.when("A","askUtils","askCsmCounter","askLogClickCsm","ready").register("askLanguageFilterCsm",function(a,c,e,d){return{idempotentSetup:c.makeIdempotent(function(){a.declarative("ask-language-filter-option-click-csm",
"change",function(a){a=a.$currentTarget.find("option:selected").data("csm-name");e.logCounterMetric(a)});d.idempotentSetup()})}});h.when("A","a-alert","ready").register("askUpperFunnelQuestionPostAnswer",function(a,c){return{setup:function(e){var d=a.$("#askPostAnswerFormSection-"+e),b=a.$("#askPostAnswerForm-"+e),g=a.$("#askAnswerTextArea-"+e),f=a.$("#askPostAnswerResponse-"+e),k=a.$("#askPostAnswerSpinner-"+e),l=c("#askPostAnswerError-"+e);a.declarative.create(b,"ask-post-answer-submit");a.declarative("ask-post-answer-submit",
"submit",function(c){c.$event.preventDefault();d.children().hide();a.post(b.attr("action"),{withCredentials:!0,params:b.serializeArray(),indicator:k,success:function(a,b,c){f.html(a);f.show();g.val("")},error:function(c){401===c.http.status||409===c.http.status?(a.declarative.remove(b,"ask-post-answer-submit"),b.submit()):(b.show(),l.html(c.http.responseText).show())}})});a.declarative("ask-submit-delete-answer-form","click",function(g){g=g.data.answerId;var e=a.$("#askDeleteAnswerForm-"+g),k=a.$("#askAnswerContentSection-"+
g),l=a.$("#askUpdateAnswerSection-"+g),h=c("#askDeleteAnswerError-"+g);h.hide();l.hide();a.post(e.attr("action"),{withCredentials:!0,params:e.serializeArray(),indicator:a.$("#askDeleteAnswerSpinner-"+g),success:function(a,c,g){f.hide();k.hide();d.show();b.show()},error:function(a){h.html(a.http.responseText).show();l.show()}})})}}});h.when("A","askUtils","ready").register("askUpperFunnelQuestionRedirect",function(a,c){return{setup:function(e){var d=a.$("#redirectDelay"),b=d.data("message"),g=10,f=
setInterval(function(){g--;var a=b.replace("##delay##",g);d.text(a);0===g&&(clearInterval(f),c.goToUrl(e))},1E3);a.declarative("ask-redirect-to-spark-action","click",function(a){c.goToUrl(e)})}}});h.when("A","a-carousel-framework","a-alert","askCsmCounter","ready").register("askAnswerMoreQuestionsCarousel",function(a,c,e,d){function b(a){return a.checkValidity&&!a.checkValidity()?(a.reportValidity&&a.reportValidity(),!1):!0}var g=a.$,f=0,k=0;return{initializeCarousel:function(){c.createAll();c.initializeAll();
g(".ask-answer-more-questions-carousel-pagination-dots li:gt(4)").hide()},setup:function(l,h){var m=c.getCarouselByName("askAnswerMoreQuestionsCarouselContainer"),v=m.getAttr("set_size");a.on("a:carousel:askAnswerMoreQuestionsCarouselContainer:change:pageNumber",function(b){var c=b.newValue;1<=f&&6<c&&g(".ask-answer-more-questions-carousel-pagination-dots li:gt(5)").show();if(1>f&&5<c)m.gotoPage(b.oldValue);else{k<c&&(d.logAddCounterMetric("ask-answer-more-questions-highest-card-number-"+h,c-k),k=
c);b=b.oldValue;var e=g(".ask-answer-more-questions-carousel-pagination-dots li");e.eq(b-1).removeClass("a-selected");e.eq(c-1).addClass("a-selected")}"desktop"===h&&(b=a.$("#askAnswerMoreQuestionsDesktopBack"),1===c&&(b.removeClass("askAnswerMoreQuestionsDesktopBackActivate"),b.addClass("askAnswerMoreQuestionsDesktopBackDeactivate")),1<c&&(b.removeClass("askAnswerMoreQuestionsDesktopBackActivate"),b.addClass("askAnswerMoreQuestionsDesktopBackActivate")))});a.declarative("ask-answer-more-question-show-more-click",
"click",function(a){d.logCounterMetric("ask-answer-more-questions-show-more-questions-link-"+h);a=m.getAttr("pageNumber");g(".ask-answer-more-questions-carousel-pagination-dots li:gt(5)").show();a+1<=v&&1<=f&&m.gotoPage(a+1)});a.declarative("ask-answer-more-question-show-no-click","click",function(a){d.logCounterMetric("ask-answer-more-questions-no-more-question-link-"+h);l.hide()});a.declarative("ask-answer-more-question-back-click","click",function(a){d.logCounterMetric("ask-answer-more-questions-back-previous-question-link-"+
h);m.gotoPrevPage()});a.declarative("ask-answer-more-questions-skip-click","click",function(a){d.logCounterMetric("ask-answer-more-questions-skip-question-link-"+h);a=m.getAttr("pageNumber");1<=f&&6<a+1&&g(".ask-answer-more-questions-carousel-pagination-dots li:gt(5)").show();a===v||1>f&&5===a?l.hide():m.gotoNextPage()});a.declarative("ask-answer-more-question-answer-click","click",function(c){c=c.data.questionId;var k=m.getAttr("pageNumber"),l=a.$("#askPostAnswerForm-"+c),u=l.parents("li.a-carousel-card");
a.$("#askAnswerTextArea-"+c);a.$("#askPostAnswerResponse-"+c);var q=a.$("#askPostAnswerSpinner-"+c),y=e("#askPostAnswerError-"+c),z=a.$("#askPostAnswerFormSection-"+c).find(".askAnswerMoreQuestionsConfirmation");b(l[0])&&a.post(l.attr("action"),{withCredentials:!0,params:l.serializeArray(),indicator:q,success:function(a,b,c){f++;d.logCounterMetric("ask-answer-more-questions-post-answer-"+h);1<=f&&g(".ask-answer-more-questions-carousel-pagination-dots li:eq(5)").show();z.show();setTimeout(function(){z.hide();
u.html(a).show();k+1<=v&&m.gotoNextPage()},2E3)},error:function(a){l.show();y.html(a.http.responseText).show()}})})},showAfterPopoverHideCallback:function(b,c){var g=a.$("#askPostAnswerResponse-"+b),e=a.$("#askAnswerTextArea-"+b);g.show();e.val("");g=5<k?k-f-2:k-f-1;d.logAddCounterMetric("ask-answer-more-questions-skipped-questions-close-popover-"+c,0<g?g:0);k=f=0}}});h.when("A","askRenderAutoCompleteSuggestion","askUtils","ready").register("askAbstractAutoComplete",function(a,c,e){var d=function(){function a(){return Math.floor(65536*
(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}(),b=a.$,g=[13,37,38,39,40];return{setup:function(a,k,l,h){function m(a){q.data("autocomplete").updateSearchSuggestions(a.autoCompleteResults)}var v,p,x,t=null,u=null,q=a.find(k),y=q.closest("form"),z=a.find(".askLiveSearchSessionId"),r=y.children("input[name=searchSource]"),A=b.trim(y.children("input.askAsin").val()),B=b.trim(y.children("input.askForumId").val()),C=b.trim(r.val());
q.data("autocomplete",c.instantiate());q.data("autocomplete").setup(a,k,{minLength:2,delay:0},h);e.idempotentDeclarative(l,"keyup input",function(a){if(!g.includes(a.$event.which)){a=q.val();var c=b.trim(a);clearTimeout(p);if(c!==x){null===t&&(t=d(),z.val(t));u=b(".askLiveSearchPageLoadId").val();if(null===u||""===u)u=d(),b(".askLiveSearchPageLoadId").val(u);0===c.length&&(q.data("autocomplete").clear(),v&&v.abort(),x=null);2>c.length||(p=setTimeout(function(){clearTimeout(p);v=b.ajax("/ask/autocomplete/suggest",
{type:"GET",data:{query:c,asin:A,forumId:B,liveSearchSessionId:z.val(),liveSearchPageLoadId:b(".askLiveSearchPageLoadId").val(),searchSource:C,askLanguage:b.trim(y.find("[name=askLanguage]").val())}}).done(m);x=c},20))}}});e.idempotentDeclarativeCreate(q,l)}}});h.when("A","askUtils","jQueryUI-autocomplete","ready").register("askRenderAutoCompleteSuggestion",function(a,c){return{instantiate:function(){function e(){[g.Event("keypress",{which:13}),g.Event("keyup",{which:13})].forEach(function(a){f.trigger(a)})}
function d(){var a=b();f.autocomplete({source:function(b,c){c(a)},minLength:k.minLength||1,delay:k.delay||0,appendTo:l,select:function(a,b){var c=g.trim(b.item.value);f.val(c);e()},close:function(a,b){p()}});f.data("uiAutocomplete")._renderItem=function(a,b){return g("<li></li>").data("item.autocomplete",b).append("<a style='overflow-x:hidden; text-overflow: ellipsis; white-space: nowrap; width: 100%'>"+b.label+"</a>").appendTo(a)};f.autocomplete("search")}function b(){var a=[],b=f.val();m.forEach(function(b){b=
b.question||"";a.push({label:b,value:b})});a.push({label:v,value:b});return a}var g=a.$,f=null,k={},l=null,h=null,m=[],v="",p=null;return{setup:function(a,b,d,e){f=g(a).find(b);l=f.closest(".askAutocomplete");h=l.data("autocomplete-search-results-brief");k=d||{};p=c.defaultFunction((e||{}).autocompleteClose)},updateSearchSuggestions:function(a){var b=f.val();v=h.replace("##query##",b);m=a;d()},getSearchSuggestions:function(){var a=[];m.forEach(function(b){a.push(b.question||"")});return a},clear:function(){f.autocomplete({source:[]});
f.autocomplete("close")}}}}});h.when("A","jQuery","askVoteControl","askExpander","askLiveSearch","askHuddlesControl","askCsmCounter","askPreventDoubleSubmit","askLanguageFilterPageReload","askLanguageFilterAjaxReload","askLanguageFilterCsm","askDesktopAutoComplete","askPrefetchDetailPageSearchData","askDesktopBtfSearchCsm","ready").register("askDetailPageWidget",function(a,c,e,d,b,g,f,k,l,h,m,v,p,x){function t(a){a.delegate(".askInlineWidget .askLiveSearchEnabled","keypress",function(a){13===(a.keyCode||
a.which)&&a.preventDefault()})}function u(){a.declarative("ask-btf-desktop-search-button-click","click",function(){f.createRateLimitedCsmLogHandler("ask-btf-desktop-search-button-click")();c(".ask-btf-search-button").addClass("aok-hidden");c(".askBtfSearchFormLabel").removeClass("aok-hidden");c(".ask-btf-search-box").find("[name='askQuestionText']").focus()})}var q={liveSearchStartCallback:function(){c(".askLiveSearchLoading").show();c(".askBtfErrorOnLoadingMozartTopQuestions").addClass("aok-hidden")},
liveSearchDoneCallback:function(a){c(".askInlineWidget .askMoreQandAResults").empty();c(".askWidgetQuestions input.nextPage").val(2);c(".askInlineWidget .askTopQandALoadMoreQuestions").hide();c(".askLiveSearchLoading").hide();c(".askLiveSearchResults").html(a);c(".askWidgetQuestions").attr("class","askWidgetQuestions askLiveSearchShow");c(".askInlineWidget .askQuestionExamples").hide();c(".askQuestionForm").attr("class","askQuestionForm");c(".askPostQuestionButtonContainer").show();c(".askLiveSearchSuccessfulMessage").show();
c(".askLiveSearchFailureMessage").hide()},liveSearchClearCallback:function(){c(".askLiveSearchLoading").hide();c(".askWidgetQuestions").attr("class","askWidgetQuestions askLiveSearchHide");c(".askInlineWidget .askTopQandALoadMoreQuestions, .askInlineWidget .askQuestionExamples").show();c(".askPostQuestionButtonContainer").hide()},liveSearchFailCallback:function(){c(".askLiveSearchLoading").hide();c(".askWidgetQuestions").attr("class","askWidgetQuestions askLiveSearchHide");c(".askInlineWidget .askTopQandALoadMoreQuestions, .askInlineWidget .askQuestionExamples").show();
c(".askPostQuestionButtonContainer").show();c(".askLiveSearchSuccessfulMessage").hide();c(".askLiveSearchFailureMessage").show()}},y={callbacks:{reloadStart:function(){c(".askBtfErrorOnLoadingMozartTopQuestions").addClass("aok-hidden")},reloadSuccess:function(){var a=c("#cf-ask-cel");b.setup(a,".askInlineWidget .askLiveSearchEnabled",q);g.initializeHuddlesLinks(a,"dp")},reloadError:function(){c(".askBtfErrorOnLoadingMozartTopQuestions").removeClass("aok-hidden")}}};return{setup:function(){var a=c("#cf-ask-cel");
k.idempotentSetup();l.idempotentSetup();h.idempotentSetup("#ask-btf-container",y);m.idempotentSetup();e.setup(a);d.setup(a);t(a);b.setup(a,".askInlineWidget .askLiveSearchEnabled",q);v.setup(a,".askInlineWidget .askLiveSearchEnabled","ask-auto-complete-action-btf");g.initializeHuddlesLinks(a,"dp");p.idempotentSetup();x.idempotentSetup();u()}}});h.when("A","askVoteControl","askHuddlesControl","askPreventDoubleSubmit","askExpander","askDesktopAllQuestionsPageSearchCsm","askDesktopAllQuestionsPageLiveSearch",
"askDesktopAbstractDetailPageSearchWidget","ready").register("askAllQuestionsPage",function(a,c,e,d,b,g,f,k){var l=a.$;return{setup:function(){d.idempotentSetup();c.setup(l(".askTeaserQuestions"));b.setup(l(".askTeaserQuestions"));e.initializeHuddlesLinks(l(".askTeaserQuestions"),"ql");e.initializeChatbox();f.setup();k.setup("#askAllQuestionsPageDesktopSearch");g.setup()}}});h.when("jQuery","askDesktopAnswerSolicitationPostAnswer","askAnswerSolicitationDeleteAnswer","askExpander","ready").register("askAnswerSolicitationLandingPage",
function(a,c,e,d){return{setup:function(b){c.setup(b);e.setup(b);d.setup(a(".askTestQuestion"))}}});h.when("jQuery","askExpander","askHuddlesControl","ready").register("askDesktopAllAnswersPage",function(a,c,e){return{setup:function(){c.setup(a(".askAnswersAndComments"));e.initializeChatbox()}}});h.when("A","askDesktopDetailPageWidgetLiveSearch","askDesktopAbstractDetailPageSearchWidget","askDesktopDetailPageSearchCsm","askDesktopAutoComplete","askCsmCounter","ready").register("askDesktopDetailPageSearchWidget",
function(a,c,e,d,b,g){var f=a.$;return{setup:function(){f(".askDPSearchForm");var k=f(".askDPSearchForm");c.setup();e.setup("input.askDPSearchPostTextInput");d.setup();b.setup(k,".askDPSearchTextInput","ask-auto-complete-action-swdp");(function(){a.declarative("ask-dpsearch-desktop-input-binding-language-change","change",function(){f(".askDPSearchTextInput").val("").trigger("input")})})();(function(){a.declarative("ask-swdp-desktop-search-button-click","click",function(){g.createRateLimitedCsmLogHandler("ask-swdp-desktop-search-button-click")();
f(".ask-swdp-search-button").addClass("aok-hidden");f(".askSwdpSearchInput").removeClass("aok-hidden");f(".askDPSearchTextInput").focus()})})()}}});h.when("jQuery","askExpander","ready").register("askDesktopSingleAnswerPage",function(a,c){return{setup:function(){c.setup(a(".askAnswerAndComments"))}}});h.when("jQuery","askUpperFunnelQuestionPostAnswer","askExpander","ready").register("askDesktopUpperFunnelQuestionLandingPage",function(a,c,e){return{setup:function(d){c.setup(d);e.setup(a(".askTestQuestion"))}}});
h.when("A","askDetailPageSearchLiveSearch","askDesktopBtfTabbing","askExpander","askDesktopBtfSearchPostQuestion","askFollowupQuestions","askLanguageFilterPageReload","askDesktopBtfSearchCsm","askLanguageFilterCsm","askPrefetchDetailPageSearchData","ready").register("askDesktopBtfSearch",function(a,c,e,d,b,g,f,k,l,h){var m=a.$;return{setup:function(){var a=m(".askBtfSearchResultsContainer"),p=m(".askBtfSearchTabHeaders"),x=m(".askBtfSearchForm"),t=m(".askBtfSearchFailureMessage"),u=m(".askPostQuestionPromptContainer"),
q=m(".askBtfSearchPostQuestionPrompt"),y=m(".askBtfSearchPostQuestionForm"),z=m(".askBtfSearchQuestionErrorContainer"),r=m(".askBtfSearchSearchIndicator"),A=m(".askBtfSearchResultsViewableContent"),B=m(".askTopQandA");c.setup(x,".askBtfSearchTextInput",{liveSearchStartCallback:function(){z.children().hide();r.removeClass("aok-hidden");r.show()},liveSearchDoneCallback:function(b){m(".askInlineWidget .askMoreQandAResults").empty();m(".askWidgetQuestions input.nextPage").val(2);m(".askInlineWidget .askTopQandALoadMoreQuestions").hide();
A.removeClass("aok-hidden");a.html(b);p.show();u.show();t.hide();r.hide();e.switchToTab(0);q.show();y.hide();m(".askInlineWidget .askQuestionExamples").hide();B.hide()},liveSearchClearCallback:function(){g.resetSWDPSearchSource(".askBtfSearchForm");a.empty();p.hide();u.hide();t.hide();r.hide();z.children().hide();m(".askInlineWidget .askTopQandALoadMoreQuestions, .askInlineWidget .askQuestionExamples").show();B.show()},liveSearchFailCallback:function(){a.empty();p.hide();u.hide();r.hide();t.show();
m(".askInlineWidget .askTopQandALoadMoreQuestions, .askInlineWidget .askQuestionExamples").show();B.show()}});e.setup();k.idempotentSetup();d.setup(a);b.setup();g.idempotentSetup();f.idempotentSetup();l.idempotentSetup();h.idempotentSetup()}}});h.when("A").execute(function(a){a.on("a:dropdown:selected:question_order_dropdown",function(a){r.location=a.value})});h.when("jQuery","ready").execute(function(a){"placeholder"in document.createElement("textarea")||a(".askQuestionForm textarea").each(function(){""===
a(this).val()&&""!==a(this).attr("placeholder")&&a(this).val(a(this).attr("placeholder"));a(this).focus(function(){a(this).val()===a(this).attr("placeholder")&&a(this).val("")});a(this).blur(function(){""===a(this).val()&&a(this).val(a(this).attr("placeholder"))})})});h.when("jQuery","askAuthenticatedAjax","ready").register("askVoteControl",function(a,c){return{setup:function(e){e.undelegate(".voteAjax form","submit",c.handler);e.undelegate(".voteAjax form","ajax:beforeSend");e.undelegate(".voteAjax form",
"ajax:send");e.undelegate(".voteAjax form","ajax:error");e.undelegate(".voteAjax form","ajax:success");e.delegate(".voteAjax form","submit",c.handler);e.delegate(".voteAjax form","ajax:beforeSend",function(c,b){var g=a(c.currentTarget),f=g.closest(".voteAjax");if(f.hasClass("up")&&g.hasClass("up")||f.hasClass("down")&&g.hasClass("down"))return c.preventDefault(),b.abort(),!1});e.delegate(".voteAjax form","ajax:error",function(d,b){if(401===b.status||466===b.status)e.undelegate(".voteAjax form","submit",
c.handler),a(d.currentTarget).trigger("submit")});e.delegate(".voteAjax form","ajax:success",function(c){c=a(c.currentTarget);var b=c.closest(".voteAjax"),g=b.find(".label"),f=b.find(".count"),e=c.hasClass("up")?1:-1,e=parseInt(g.attr("data-count"),10)+e;g.attr("data-count",e);f.text(""+e);b.attr("class","vote voteAjax "+c.attr("class"))})}}});h.when("A","ready").register("askDesktopTabbing",function(a){function c(a){(function(a){var b=d(".askSearchResultsHeader");a=d(b.get(a));b.removeClass("askSearchResultsHeaderActive");
a.addClass("askSearchResultsHeaderActive")})(a);(function(a){var b=d(".askSearchResults");a=d(b.get(a));b.removeClass("askSearchResultsActive");a.addClass("askSearchResultsActive")})(a)}function e(){a.declarative("ask-dpsearch-desktop-go-to-tab","click",function(a){d(".askSearchResultsHeader").index(a.$target);c(a.data.index)})}var d=a.$;return{setup:function(){e()},switchToTab:c}});h.when("A","askAbstractDetailPageSearchPostQuestion","askUtils","ready").register("askDesktopDetailPageSearchPostQuestion",
function(a,c,e){var d=a.$;return{setup:function(b){var g=d(".askDPSearchForm"),f=d(".askDPSearchQuestionErrorContainer"),k=f.find(".askBadQuestionError");a.declarative("ask-dpsearch-desktop-open-post-question","click",function(a){d(".askDPSearchPostQuestionPrompt").hide();d(".askDPSearchPostQuestionForm").removeClass("aok-hidden").show();a=d(".askDPSearchTextInput").val();d(b).val(a)});var l=e.makeRateLimited(function(){g.submit()},{minPeriodInMilliseconds:2E3});c.setup("ask-dpsearch-desktop-post-question",
{postQuestionTextInputSelector:b,callbacks:{goodQuestion:l,badQuestion:function(){f.children().hide();k.show()}}})}}});h.when("A","askCsmCounter","askLogClickCsm","askLanguageFilterCsm","ready").register("askDesktopDetailPageSearchCsm",function(a,c,e,d){return{setup:function(){a.declarative("ask-dpsearch-desktop-input-change","change",function(a){var d="ask-dpsearch-desktop-input-change";a.data.searchButton&&(d="ask-dpsearch-button-desktop-input-change");c.logCounterMetric(d)});a.declarative("ask-dpsearch-desktop-input-keyup",
"keyup",function(a){var d="ask-dpsearch-desktop-input-keyup";a.data.searchButton&&(d="ask-dpsearch-button-desktop-input-keyup");c.logCounterMetric(d)});a.declarative("ask-dpsearch-desktop-input-click","click touchstart",function(a){var d="ask-dpsearch-desktop-input-click";a.data.searchButton&&(d="ask-dpsearch-button-desktop-input-click");c.createRateLimitedCsmLogHandler(d)()});a.declarative("ask-dpsearch-desktop-input-focusin","focusin",function(a){var d="ask-dpsearch-desktop-input-focusin";a.data.searchButton&&
(d="ask-dpsearch-button-desktop-input-focusin");c.createRateLimitedCsmLogHandler(d)()});e.idempotentSetup();d.idempotentSetup()}}});h.when("A","askCsmCounter","askLogClickCsm","ready").register("askDesktopAllQuestionsPageSearchCsm",function(a,c,e){return{setup:function(){a.declarative("ask-aqpsearch-desktop-input-change","change",function(){c.logCounterMetric("ask-aqpsearch-desktop-input-change")});a.declarative("ask-aqpsearch-desktop-input-keyup","keyup",function(){c.logCounterMetric("ask-aqpsearch-desktop-input-keyup")});
var d=c.createRateLimitedCsmLogHandler("ask-aqpsearch-desktop-input-click");a.declarative("ask-aqpsearch-desktop-input-click","click touchstart",d);d=c.createRateLimitedCsmLogHandler("ask-aqpsearch-desktop-input-focusin");a.declarative("ask-aqpsearch-desktop-input-focusin","focusin",d);e.idempotentSetup()}}});h.when("A","askDetailPageSearchLiveSearch","askDesktopTabbing","askFollowupQuestions","ready").register("askDesktopDetailPageWidgetLiveSearch",function(a,c,e,d){var b=a.$;return{setup:function(){var a=
b(".askSearchResultsContainer"),f=b(".askSearchTabHeaders"),k=b(".askDPSearchForm"),l=b(".askDPSearchFailureMessage"),h=b(".askPostQuestionPromptContainer"),m=b(".askDPSearchPostQuestionPrompt"),v=b(".askDPSearchPostQuestionForm"),p=b(".askDPSearchQuestionErrorContainer"),x=b(".askDPSearchSearchIndicator"),t=b(".askDPSearchResultsViewableContent");c.setup(k,".askDPSearchTextInput",{liveSearchStartCallback:function(){p.children().hide();x.removeClass("aok-hidden");x.show()},liveSearchDoneCallback:function(b){t.removeClass("aok-hidden");
a.html(b);f.show();h.show();l.hide();x.hide();e.switchToTab(0);m.show();v.hide()},liveSearchClearCallback:function(){d.resetSWDPSearchSource(".askDPSearchForm");a.empty();f.hide();h.hide();l.hide();x.hide();p.children().hide()},liveSearchFailCallback:function(){a.empty();f.hide();h.hide();x.hide();l.show()}})}}});h.when("A","askDetailPageSearchLiveSearch","askDesktopTabbing","askFollowupQuestions","ready").register("askDesktopAllQuestionsPageLiveSearch",function(a,c,e,d){var b=a.$;return{setup:function(){function a(){q.hide();
y.hide();z.hide()}var f=b(".askSearchResultsContainer"),k=b(".askSearchTabHeaders"),l=b(".askDPSearchForm"),h=b(".askDPSearchFailureMessage"),m=b(".askPostQuestionPromptContainer"),v=b(".askDPSearchPostQuestionPrompt"),p=b(".askDPSearchPostQuestionForm"),x=b(".askDPSearchQuestionErrorContainer"),t=b(".askDPSearchSearchIndicator"),u=b(".askDPSearchResultsViewableContent"),q=b(".askPaginationHeader"),y=b(".askInlineWidget"),z=b(".askQuestionsPagePaginationBar");c.setup(l,"#askAllQuestionsPageDesktopSearch",
{liveSearchStartCallback:function(){x.children().hide();a();t.removeClass("aok-hidden");t.show()},liveSearchDoneCallback:function(b){u.removeClass("aok-hidden");f.html(b);k.show();m.show();h.hide();t.hide();e.switchToTab(0);v.show();p.hide();a()},liveSearchClearCallback:function(){d.resetSWDPSearchSource(".askDPSearchForm");f.empty();k.hide();m.hide();h.hide();t.hide();x.children().hide();q.show();y.show();z.show()},liveSearchFailCallback:function(){f.empty();k.hide();m.hide();t.hide();h.show();a()}})}}});
h.when("A","askPrefetchDetailPageSearchData","askDesktopTabbing","askExpander","askDesktopDetailPageSearchPostQuestion","askFollowupQuestions","ready").register("askDesktopAbstractDetailPageSearchWidget",function(a,c,e,d,b,g){var f=a.$;return{setup:function(a){var l=f(".askSearchResultsContainer");c.setup();e.setup();d.setup(l);b.setup(a);g.idempotentSetup()}}});h.when("A","jQuery","ready").register("askModerationControl",function(a,c){function e(a,b){var c="";b.forEach(function(b){c+=a.replace(/##marketplace##/g,
b.marketplace||"").replace(/##uri##/g,b.uri||"").replace(/##subject##/g,(b.subject||"").id).replace(/##text##/g,b.text||"").replace(/##author##/g,b.actorId||"").replace(/##submitDate##/g,b.submitDate||"").replace(/##contentState##/g,b.contentState||"").replace(/##moderationState##/g,b.moderationState||"")});return c}function d(a,b){var c="";b.forEach(function(b){c+=a.replace(/##marketplace##/g,b.marketplace||"").replace(/##uri##/g,b.uri||"").replace(/##subject##/g,b.questionUri||"").replace(/##text##/g,
b.text||"").replace(/##author##/g,b.actorId||"").replace(/##submitDate##/g,b.submitDate||"").replace(/##contentState##/g,b.contentState||"").replace(/##moderationState##/g,b.moderationState||"")});return c}function b(a){a=a.serializeArray();var b={};c.map(a,function(a,c){b[a.name]=a.value});return b}return{setup:function(g){function f(){var c=b(g.find("#byCustomerForm"));if(h(c,["customerId","type"])){var f=c.type,k;a:switch(f){case "questions":k=g.find("#questionResultTable");break a;case "answers":k=
g.find("#answerResultTable");break a;default:k=null}var l="answers"===f?d:e;a.get("/ask/moderator/searchByCustomer/"+f,{params:c,success:function(a){var b=q(a.items,"uri");C.val(a.nextPageToken||"");k.find("tbody").append(l(r,b)).parent().show()},error:z})}}function k(c,f){var k=b(g.find("#byThreadForm"));h(k,["questionId"])&&(c&&a.get("/ask/moderator/searchByThread/questions",{params:k,success:function(a){a=a.items;A.find("tbody").append(e(r,a)).parent().show()},error:z}),f&&a.get("/ask/moderator/searchByThread/answers",
{params:k,success:function(a){a=a.items;w.val(B.find("tbody tr").length+a.length);B.find("tbody").append(d(r,a)).parent().show()},error:z}))}function l(b,c,f){a.post("/ask/moderator/moderate/"+f,{params:{action:b,uris:c.join(",")},success:y,error:z})}function h(a,b){var c=[];b.forEach(function(b){var f="Field "+b+" must be specified.";b=a[b]&&0!==a[b].trim().length?void 0:f;b&&c.push(b)});return c.length?(m(c),!1):!0}function m(a){a="<ul>"+c.map(a,function(a){return"<li>"+a+"</li>"}).join("")+"</ul>";
var b=g.find(".moderationError");b.show();b.find(".a-alert-content").html(a)}function v(){g.find(".moderationError").hide().find(".a-alert-content").html("");g.find(".moderationSuccess").hide().find(".a-alert-content").html("")}function p(){g.find("#questionResultTable").hide().find("tbody").html("");g.find("#answerResultTable").hide().find("tbody").html("")}function x(){C.val("");w.val(0);E.val(10)}function t(a){var b=[];a.find("tbody tr").each(function(a,f){if(c(f).find("input:checkbox").is(":checked")){var d=
c(f).find(".itemUri").data("uri");-1===b.indexOf(d)&&b.push(d)}});return b}function u(a){a=a.attr("id");return a.match("question")?"questions":a.match("answer")?"answers":""}function q(a,b){var c=[];return a.filter(function(a){a=a[b]||"";var f=-1===c.indexOf(a);f&&c.push(a);return f})}function y(a){g.find(".moderationSuccess").show().find(".a-alert-content").html("Action Success!")}function z(a){m(["Error Encountered: "+a.http.responseText])}var r=g.find("#template-tr-item").first().html(),A=g.find("#questionResultTable"),
B=g.find("#answerResultTable"),C=g.find("input[name='nextPageToken']"),w=g.find("input[name='offset']"),E=g.find("input[name='limit']"),G="byThread";a.on("a:tabs:searchCriterion:select",function(a){G=a.selectedTab.tabName});g.delegate(".searchByCustomer","click",function(a){v();p();x();f()});g.delegate(".searchByThread","click",function(a){v();p();x();k(!0,!0)});g.delegate(".loadMore","click",function(a){v();"byCustomer"===G?f():k(!1,!0)});g.delegate(".unsuppress","click",function(a){v();g.find("table:visible").each(function(a,
b){var f=c(b),d=t(f);(f=u(f))&&d.length&&l("unsuppress",d,f)})});g.delegate(".suppress","click",function(a){v();g.find("table:visible").each(function(a,b){var f=c(b),d=t(f);(f=u(f))&&d.length&&l("suppress",d,f)})});g.delegate(".suppressAll","click",function(b){v();(b=g.find("input[name='questionId']").val())?confirm("Are you sure to suppress the question and all the answers to it?")&&a.post("/ask/moderator/moderate/suppressAll",{params:{questionId:b.trim()},success:y,error:z}):m(["No Question Specified."])});
g.delegate("input[name='selectAll']","change",function(a){a=this.checked;c(this).parents("table").find("tbody input:checkbox").prop("checked",a)});g.delegate("select[name='type']","change",function(a){v();p()})}}});h.when("A","a-modal","a-alert","askAnswerMoreQuestionsCarousel","a-carousel-framework","askCsmCounter","ready").register("askDesktopAnswerSolicitationPostAnswer",function(a,c,e,d,b,g){function f(c,f){var e=b.getCarouselByName("askAnswerMoreQuestionsCarouselContainer");a.on("a:popover:afterHide:askAnswerMoreQuestionsModal",
function(a){d.showAfterPopoverHideCallback(c,f)});a.declarative("ask-answer-more-questions-desktop-back-click","click",function(a){g.logCounterMetric("ask-answer-more-questions-desktop-back-link");1<=e.getAttr("pageNumber")-1&&e.gotoPrevPage()});a.declarative("ask-answer-more-questions-desktop-pagination-click","click",function(a){g.logCounterMetric("ask-answer-more-questions-desktop-pagination-dot-click");e.gotoPage(a.data.card)})}return{setup:function(b){var l=a.$("#askPostAnswerFormSection-"+b),
h=a.$("#askPostAnswerForm-"+b),m=a.$("#askAnswerTextArea-"+b),v=a.$("#askPostAnswerResponse-"+b),p=a.$("#askPostAnswerSpinner-"+b),x=e("#askPostAnswerError-"+b);a.declarative.create(h,"ask-post-answer-submit");a.declarative("ask-post-answer-submit","submit",function(e){e.$event.preventDefault();l.children().hide();a.post(h.attr("action"),{withCredentials:!0,params:h.serializeArray(),indicator:p,success:function(e,l,h){g.logCounterMetric("ask-answer-solicitation-post-answer-desktop");v.html(e);e=a.$(".askAnswerMoreQuestionsModal");
e.length?(g.logCounterMetric("ask-answer-more-questions-enter-desktop"),c.create(e,{name:"askAnswerMoreQuestionsModal",inlineContent:e,height:358,width:427,hideHeader:"true"}).show(),d.initializeCarousel(),e=c.get("askAnswerMoreQuestionsModal"),d.setup(e,"desktop"),f(b,"desktop")):(v.show(),m.val(""))},error:function(b){401===b.http.status||409===b.http.status?(a.declarative.remove(h,"ask-post-answer-submit"),h.submit()):(h.show(),x.html(b.http.responseText).show())}})})}}});h.when("ready").register("askDesktopAutoComplete",
function(){return{setup:function(a,c,e){}}});h.when("A","askAbstractDetailPageSearchPostQuestion","askUtils","ready").register("askDesktopBtfSearchPostQuestion",function(a,c,e){var d=a.$;return{setup:function(){var b=d(".askBtfSearchForm"),g=d(".askBtfSearchQuestionErrorContainer"),f=g.find(".askBadQuestionError");a.declarative("ask-btfsearch-desktop-open-post-question","click",function(a){d(".askBtfSearchPostQuestionPrompt").hide();d(".askBtfSearchPostQuestionForm").removeClass("aok-hidden").show();
a=d(".askBtfSearchTextInput").val();d("input.askBtfSearchPostTextInput").val(a)});var k={postQuestionTextInputSelector:"input.askBtfSearchPostTextInput",callbacks:{goodQuestion:e.makeRateLimited(function(){b.submit()},{minPeriodInMilliseconds:2E3}),badQuestion:function(){g.children().hide();f.show()}}};c.setup("ask-btfsearch-desktop-post-question",k)}}});h.when("A","ready").register("askDesktopBtfTabbing",function(a){function c(a){(function(a){var b=d(".askBtfSearchResultsHeader");a=d(b.get(a));b.removeClass("askBtfSearchResultsHeaderActive");
a.addClass("askBtfSearchResultsHeaderActive")})(a);(function(a){var b=d(".askBtfSearchResults");a=d(b.get(a));b.removeClass("askBtfSearchResultsActive");a.addClass("askBtfSearchResultsActive")})(a)}function e(){a.declarative("ask-btfsearch-desktop-go-to-tab","click",function(a){d(".askBtfSearchResultsHeader").index(a.$target);c(a.data.index)})}var d=a.$;return{setup:function(){e()},switchToTab:c}});h.when("A","askUtils","askCsmCounter","askLogClickCsm","askLanguageFilterCsm","ready").register("askDesktopBtfSearchCsm",
function(a,c,e,d,b){return{idempotentSetup:c.makeIdempotent(function(){var b=e.createRateLimitedCsmLogHandler("ask-btf-desktop-all-questions-page-button-click");a.declarative("ask-btf-desktop-all-questions-page-button-click","click",b);a.declarative("ask-btf-desktop-input-click","click",function(a){var b="ask-btf-desktop-input-click";a.data.searchButton&&(b="ask-btf-desktop-button-input-click");e.createRateLimitedCsmLogHandler(b)()});a.declarative("ask-btf-desktop-input-focusin","focusin",function(a){var b=
"ask-btf-desktop-input-focusin";a.data.searchButton&&(b="ask-btf-desktop-button-input-focusin");e.createRateLimitedCsmLogHandler(b)()});a.declarative("ask-btf-desktop-input-change","change",function(a){var b="ask-btf-desktop-input-change";a.data.searchButton&&(b="ask-btf-desktop-button-input-change");e.logCounterMetric(b)});a.declarative("ask-btf-desktop-input-keyup","keyup",function(a){var b="ask-btf-desktop-input-keyup";a.data.searchButton&&(b="ask-btf-desktop-button-input-keyup");e.logCounterMetric(b)});
a.declarative("ask-btf-search-link-click","click",function(){e.logCounterMetric("ask-btf-desktop-search-link-click");$(".ask-btf-search-link").addClass("aok-hidden");$(".ask-btf-search-box").removeClass("aok-hidden")})})}})});
/* ******** */
P.register("3p-urijs",function(){(function(h,l){"object"===typeof exports?module.exports=l(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"===typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],l):h.URI=l(h.punycode,h.IPv6,h.SecondLevelDomains,h)})(this,function(h,l,p,b){function a(b,c){if(!(this instanceof a))return new a(b,c);void 0===b&&(b="undefined"!==typeof location?location.href+"":"");this.href(b);return void 0!==c?this.absoluteTo(c):
this}function c(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function d(a){return void 0===a?"Undefined":String(Object.prototype.toString.call(a)).slice(8,-1)}function g(a){return"Array"===d(a)}function f(a,b){var c,e;if(g(b)){c=0;for(e=b.length;c<e;c++)if(!f(a,b[c]))return!1;return!0}var h=d(b);c=0;for(e=a.length;c<e;c++)if("RegExp"===h){if("string"===typeof a[c]&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1}function e(a,b){if(!g(a)||!g(b)||a.length!==b.length)return!1;a.sort();
b.sort();for(var c=0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0}function q(a){return escape(a)}function k(a){return encodeURIComponent(a).replace(/[!'()*]/g,q).replace(/\*/g,"%2A")}function m(a){return function(b,c){if(void 0===b)return this._parts[a]||"";this._parts[a]=b||null;this.build(!c);return this}}function t(a,b){return function(c,d){if(void 0===c)return this._parts[a]||"";null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1)));this._parts[a]=c;this.build(!d);return this}}var u=b&&
b.URI;a.version="1.14.1";var n=a.prototype,v=Object.prototype.hasOwnProperty;a._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:a.duplicateQueryParameters,escapeQuerySpace:a.escapeQuerySpace}};a.duplicateQueryParameters=!1;a.escapeQuerySpace=!0;a.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;a.idn_expression=/[^a-z0-9\.-]/i;a.punycode_expression=/(xn--)/i;a.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;
a.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
a.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/ig;a.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/};a.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};a.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;a.domAttributes={a:"href",blockquote:"cite",
link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"};a.getDomAttribute=function(b){if(b&&b.nodeName){var c=b.nodeName.toLowerCase();return"input"===c&&"image"!==b.type?void 0:a.domAttributes[c]}};a.encode=k;a.decode=decodeURIComponent;a.iso8859=function(){a.encode=escape;a.decode=unescape};a.unicode=function(){a.encode=k;a.decode=decodeURIComponent};a.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,
map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}};a.encodeQuery=function(b,c){var d=a.encode(b+"");void 0===c&&(c=a.escapeQuerySpace);
return c?d.replace(/%20/g,"+"):d};a.decodeQuery=function(b,c){b+="";void 0===c&&(c=a.escapeQuerySpace);try{return a.decode(c?b.replace(/\+/g,"%20"):b)}catch(d){return b}};a.recodePath=function(b){b=(b+"").split("/");for(var c=0,d=b.length;c<d;c++)b[c]=a.encodePathSegment(a.decode(b[c]));return b.join("/")};a.decodePath=function(b){b=(b+"").split("/");for(var c=0,d=b.length;c<d;c++)b[c]=a.decodePathSegment(b[c]);return b.join("/")};var y={encode:"encode",decode:"decode"},C,E=function(b,c){return function(d){try{return a[c](d+
"").replace(a.characters[b][c].expression,function(d){return a.characters[b][c].map[d]})}catch(e){return d}}};for(C in y)a[C+"PathSegment"]=E("pathname",y[C]);a.encodeReserved=E("reserved","encode");a.parse=function(b,c){var d;c||(c={});d=b.indexOf("#");-1<d&&(c.fragment=b.substring(d+1)||null,b=b.substring(0,d));d=b.indexOf("?");-1<d&&(c.query=b.substring(d+1)||null,b=b.substring(0,d));"//"===b.substring(0,2)?(c.protocol=null,b=b.substring(2),b=a.parseAuthority(b,c)):(d=b.indexOf(":"),-1<d&&(c.protocol=
b.substring(0,d)||null,c.protocol&&!c.protocol.match(a.protocol_expression)?c.protocol=void 0:"//"===b.substring(d+1,d+3)?(b=b.substring(d+3),b=a.parseAuthority(b,c)):(b=b.substring(d+1),c.urn=!0)));c.path=b;return c};a.parseHost=function(a,b){var c=a.indexOf("/"),d;-1===c&&(c=a.length);"["===a.charAt(0)?(d=a.indexOf("]"),b.hostname=a.substring(1,d)||null,b.port=a.substring(d+2,c)||null,"/"===b.port&&(b.port=null)):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,c)||null,b.port=null):
(d=a.substring(0,c).split(":"),b.hostname=d[0]||null,b.port=d[1]||null);b.hostname&&"/"!==a.substring(c).charAt(0)&&(c++,a="/"+a);return a.substring(c)||"/"};a.parseAuthority=function(b,c){b=a.parseUserinfo(b,c);return a.parseHost(b,c)};a.parseUserinfo=function(b,c){var d=b.indexOf("/"),e=b.lastIndexOf("@",-1<d?d:b.length-1);-1<e&&(-1===d||e<d)?(d=b.substring(0,e).split(":"),c.username=d[0]?a.decode(d[0]):null,d.shift(),c.password=d[0]?a.decode(d.join(":")):null,b=b.substring(e+1)):(c.username=null,
c.password=null);return b};a.parseQuery=function(b,c){if(!b)return{};b=b.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!b)return{};for(var d={},e=b.split("&"),f=e.length,g,h,k=0;k<f;k++)g=e[k].split("="),h=a.decodeQuery(g.shift(),c),g=g.length?a.decodeQuery(g.join("="),c):null,v.call(d,h)?("string"===typeof d[h]&&(d[h]=[d[h]]),d[h].push(g)):d[h]=g;return d};a.build=function(b){var c="";b.protocol&&(c+=b.protocol+":");b.urn||!c&&!b.hostname||(c+="//");c+=a.buildAuthority(b)||"";"string"===typeof b.path&&
("/"!==b.path.charAt(0)&&"string"===typeof b.hostname&&(c+="/"),c+=b.path);"string"===typeof b.query&&b.query&&(c+="?"+b.query);"string"===typeof b.fragment&&b.fragment&&(c+="#"+b.fragment);return c};a.buildHost=function(b){var c="";if(b.hostname)c=a.ip6_expression.test(b.hostname)?c+("["+b.hostname+"]"):c+b.hostname;else return"";b.port&&(c+=":"+b.port);return c};a.buildAuthority=function(b){return a.buildUserinfo(b)+a.buildHost(b)};a.buildUserinfo=function(b){var c="";b.username&&(c+=a.encode(b.username),
b.password&&(c+=":"+a.encode(b.password)),c+="@");return c};a.buildQuery=function(b,c,d){var e="",f,h,k,l;for(h in b)if(v.call(b,h)&&h)if(g(b[h]))for(f={},k=0,l=b[h].length;k<l;k++)void 0!==b[h][k]&&void 0===f[b[h][k]+""]&&(e+="&"+a.buildQueryParameter(h,b[h][k],d),!0!==c&&(f[b[h][k]+""]=!0));else void 0!==b[h]&&(e+="&"+a.buildQueryParameter(h,b[h],d));return e.substring(1)};a.buildQueryParameter=function(b,c,d){return a.encodeQuery(b,d)+(null!==c?"="+a.encodeQuery(c,d):"")};a.addQuery=function(b,
c,d){if("object"===typeof c)for(var e in c)v.call(c,e)&&a.addQuery(b,e,c[e]);else if("string"===typeof c)void 0===b[c]?b[c]=d:("string"===typeof b[c]&&(b[c]=[b[c]]),g(d)||(d=[d]),b[c]=(b[c]||[]).concat(d));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};a.removeQuery=function(b,c,d){var e;if(g(c))for(d=0,e=c.length;d<e;d++)b[c[d]]=void 0;else if("object"===typeof c)for(e in c)v.call(c,e)&&a.removeQuery(b,e,c[e]);else if("string"===typeof c)if(void 0!==
d)if(b[c]===d)b[c]=void 0;else{if(g(b[c])){e=b[c];var f={},h,k;if(g(d))for(h=0,k=d.length;h<k;h++)f[d[h]]=!0;else f[d]=!0;h=0;for(k=e.length;h<k;h++)void 0!==f[e[h]]&&(e.splice(h,1),k--,h--);b[c]=e}}else b[c]=void 0;else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");};a.hasQuery=function(b,c,h,k){if("object"===typeof c){for(var l in c)if(v.call(c,l)&&!a.hasQuery(b,l,c[l]))return!1;return!0}if("string"!==typeof c)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");
switch(d(h)){case "Undefined":return c in b;case "Boolean":return b=Boolean(g(b[c])?b[c].length:b[c]),h===b;case "Function":return!!h(b[c],c,b);case "Array":return g(b[c])?(k?f:e)(b[c],h):!1;case "RegExp":return g(b[c])?k?f(b[c],h):!1:Boolean(b[c]&&b[c].match(h));case "Number":h=String(h);case "String":return g(b[c])?k?f(b[c],h):!1:b[c]===h;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");}};a.commonPath=function(a,b){var c=
Math.min(a.length,b.length),d;for(d=0;d<c;d++)if(a.charAt(d)!==b.charAt(d)){d--;break}if(1>d)return a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"";if("/"!==a.charAt(d)||"/"!==b.charAt(d))d=a.substring(0,d).lastIndexOf("/");return a.substring(0,d+1)};a.withinString=function(b,c,d){d||(d={});var e=d.start||a.findUri.start,f=d.end||a.findUri.end,g=d.trim||a.findUri.trim,h=/[a-z0-9-]=["']?$/i;for(e.lastIndex=0;;){var k=e.exec(b);if(!k)break;k=k.index;if(d.ignoreHtml){var l=b.slice(Math.max(k-3,0),
k);if(l&&h.test(l))continue}var l=k+b.slice(k).search(f),m=b.slice(k,l).replace(g,"");d.ignore&&d.ignore.test(m)||(l=k+m.length,m=c(m,k,l,b),b=b.slice(0,k)+m+b.slice(l),e.lastIndex=k+m.length)}e.lastIndex=0;return b};a.ensureValidHostname=function(b){if(b.match(a.invalid_hostname_characters)){if(!h)throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(h.toASCII(b).match(a.invalid_hostname_characters))throw new TypeError('Hostname "'+
b+'" contains characters other than [A-Z0-9.-]');}};a.noConflict=function(a){if(a)return a={URI:this.noConflict()},b.URITemplate&&"function"===typeof b.URITemplate.noConflict&&(a.URITemplate=b.URITemplate.noConflict()),b.IPv6&&"function"===typeof b.IPv6.noConflict&&(a.IPv6=b.IPv6.noConflict()),b.SecondLevelDomains&&"function"===typeof b.SecondLevelDomains.noConflict&&(a.SecondLevelDomains=b.SecondLevelDomains.noConflict()),a;b.URI===this&&(b.URI=u);return this};n.build=function(b){if(!0===b)this._deferred_build=
!0;else if(void 0===b||this._deferred_build)this._string=a.build(this._parts),this._deferred_build=!1;return this};n.clone=function(){return new a(this)};n.valueOf=n.toString=function(){return this.build(!1)._string};n.protocol=m("protocol");n.username=m("username");n.password=m("password");n.hostname=m("hostname");n.port=m("port");n.query=t("query","?");n.fragment=t("fragment","#");n.search=function(a,b){var c=this.query(a,b);return"string"===typeof c&&c.length?"?"+c:c};n.hash=function(a,b){var c=
this.fragment(a,b);return"string"===typeof c&&c.length?"#"+c:c};n.pathname=function(b,c){if(void 0===b||!0===b){var d=this._parts.path||(this._parts.hostname?"/":"");return b?a.decodePath(d):d}this._parts.path=b?a.recodePath(b):"/";this.build(!c);return this};n.path=n.pathname;n.href=function(b,c){var d;if(void 0===b)return this.toString();this._string="";this._parts=a._parts();var e=b instanceof a,f="object"===typeof b&&(b.hostname||b.path||b.pathname);b.nodeName&&(f=a.getDomAttribute(b),b=b[f]||
"",f=!1);!e&&f&&void 0!==b.pathname&&(b=b.toString());if("string"===typeof b||b instanceof String)this._parts=a.parse(String(b),this._parts);else if(e||f)for(d in e=e?b._parts:b,e)v.call(this._parts,d)&&(this._parts[d]=e[d]);else throw new TypeError("invalid input");this.build(!c);return this};n.is=function(b){var c=!1,d=!1,e=!1,f=!1,g=!1,h=!1,k=!1,l=!this._parts.urn;this._parts.hostname&&(l=!1,d=a.ip4_expression.test(this._parts.hostname),e=a.ip6_expression.test(this._parts.hostname),c=d||e,g=(f=
!c)&&p&&p.has(this._parts.hostname),h=f&&a.idn_expression.test(this._parts.hostname),k=f&&a.punycode_expression.test(this._parts.hostname));switch(b.toLowerCase()){case "relative":return l;case "absolute":return!l;case "domain":case "name":return f;case "sld":return g;case "ip":return c;case "ip4":case "ipv4":case "inet4":return d;case "ip6":case "ipv6":case "inet6":return e;case "idn":return h;case "url":return!this._parts.urn;case "urn":return!!this._parts.urn;case "punycode":return k}return null};
var z=n.protocol,w=n.port,x=n.hostname;n.protocol=function(b,c){if(void 0!==b&&b&&(b=b.replace(/:(\/\/)?$/,""),!b.match(a.protocol_expression)))throw new TypeError('Protocol "'+b+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return z.call(this,b,c)};n.scheme=n.protocol;n.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError('Port "'+a+'" contains characters other than [0-9]');
return w.call(this,a,b)};n.hostname=function(b,c){if(this._parts.urn)return void 0===b?"":this;if(void 0!==b){var d={};a.parseHost(b,d);b=d.hostname}return x.call(this,b,c)};n.host=function(b,c){if(this._parts.urn)return void 0===b?"":this;if(void 0===b)return this._parts.hostname?a.buildHost(this._parts):"";a.parseHost(b,this._parts);this.build(!c);return this};n.authority=function(b,c){if(this._parts.urn)return void 0===b?"":this;if(void 0===b)return this._parts.hostname?a.buildAuthority(this._parts):
"";a.parseAuthority(b,this._parts);this.build(!c);return this};n.userinfo=function(b,c){if(this._parts.urn)return void 0===b?"":this;if(void 0===b){if(!this._parts.username)return"";var d=a.buildUserinfo(this._parts);return d.substring(0,d.length-1)}"@"!==b[b.length-1]&&(b+="@");a.parseUserinfo(b,this._parts);this.build(!c);return this};n.resource=function(b,c){var d;if(void 0===b)return this.path()+this.search()+this.hash();d=a.parse(b);this._parts.path=d.path;this._parts.query=d.query;this._parts.fragment=
d.fragment;this.build(!c);return this};n.subdomain=function(b,d){if(this._parts.urn)return void 0===b?"":this;if(void 0===b){if(!this._parts.hostname||this.is("IP"))return"";var e=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,e)||""}e=this._parts.hostname.length-this.domain().length;e=this._parts.hostname.substring(0,e);e=new RegExp("^"+c(e));b&&"."!==b.charAt(b.length-1)&&(b+=".");b&&a.ensureValidHostname(b);this._parts.hostname=this._parts.hostname.replace(e,
b);this.build(!d);return this};n.domain=function(b,d){if(this._parts.urn)return void 0===b?"":this;"boolean"===typeof b&&(d=b,b=void 0);if(void 0===b){if(!this._parts.hostname||this.is("IP"))return"";var e=this._parts.hostname.match(/\./g);if(e&&2>e.length)return this._parts.hostname;e=this._parts.hostname.length-this.tld(d).length-1;e=this._parts.hostname.lastIndexOf(".",e-1)+1;return this._parts.hostname.substring(e)||""}if(!b)throw new TypeError("cannot set domain empty");a.ensureValidHostname(b);
!this._parts.hostname||this.is("IP")?this._parts.hostname=b:(e=new RegExp(c(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(e,b));this.build(!d);return this};n.tld=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var d=this._parts.hostname.lastIndexOf("."),d=this._parts.hostname.substring(d+1);return!0!==b&&p&&p.list[d.toLowerCase()]?p.get(this._parts.hostname)||d:d}if(a)if(a.match(/[^a-zA-Z0-9-]/))if(p&&
p.is(a))d=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(d,a);else throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");d=new RegExp(c(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(d,a)}else throw new TypeError("cannot set TLD empty");this.build(!b);return this};n.directory=function(b,d){if(this._parts.urn)return void 0===
b?"":this;if(void 0===b||!0===b){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var e=this._parts.path.length-this.filename().length-1,e=this._parts.path.substring(0,e)||(this._parts.hostname?"/":"");return b?a.decodePath(e):e}e=this._parts.path.length-this.filename().length;e=this._parts.path.substring(0,e);e=new RegExp("^"+c(e));this.is("relative")||(b||(b="/"),"/"!==b.charAt(0)&&(b="/"+b));b&&"/"!==b.charAt(b.length-1)&&(b+="/");b=a.recodePath(b);this._parts.path=
this._parts.path.replace(e,b);this.build(!d);return this};n.filename=function(b,d){if(this._parts.urn)return void 0===b?"":this;if(void 0===b||!0===b){if(!this._parts.path||"/"===this._parts.path)return"";var e=this._parts.path.lastIndexOf("/"),e=this._parts.path.substring(e+1);return b?a.decodePathSegment(e):e}e=!1;"/"===b.charAt(0)&&(b=b.substring(1));b.match(/\.?\//)&&(e=!0);var f=new RegExp(c(this.filename())+"$");b=a.recodePath(b);this._parts.path=this._parts.path.replace(f,b);e?this.normalizePath(d):
this.build(!d);return this};n.suffix=function(b,d){if(this._parts.urn)return void 0===b?"":this;if(void 0===b||!0===b){if(!this._parts.path||"/"===this._parts.path)return"";var e=this.filename(),f=e.lastIndexOf(".");if(-1===f)return"";e=e.substring(f+1);e=/^[a-z0-9%]+$/i.test(e)?e:"";return b?a.decodePathSegment(e):e}"."===b.charAt(0)&&(b=b.substring(1));if(e=this.suffix())f=b?new RegExp(c(e)+"$"):new RegExp(c("."+e)+"$");else{if(!b)return this;this._parts.path+="."+a.recodePath(b)}f&&(b=a.recodePath(b),
this._parts.path=this._parts.path.replace(f,b));this.build(!d);return this};n.segment=function(a,b,c){var d=this._parts.urn?":":"/",e=this.path(),f="/"===e.substring(0,1),e=e.split(d);void 0!==a&&"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0!==a&&"number"!==typeof a)throw Error('Bad segment "'+a+'", must be 0-based integer');f&&e.shift();0>a&&(a=Math.max(e.length+a,0));if(void 0===b)return void 0===a?e:e[a];if(null===a||void 0===e[a])if(g(b)){e=[];a=0;for(var h=b.length;a<h;a++)if(b[a].length||
e.length&&e[e.length-1].length)e.length&&!e[e.length-1].length&&e.pop(),e.push(b[a])}else{if(b||"string"===typeof b)""===e[e.length-1]?e[e.length-1]=b:e.push(b)}else b?e[a]=b:e.splice(a,1);f&&e.unshift("");return this.path(e.join(d),c)};n.segmentCoded=function(b,c,d){var e,f;"number"!==typeof b&&(d=c,c=b,b=void 0);if(void 0===c){b=this.segment(b,c,d);if(g(b))for(e=0,f=b.length;e<f;e++)b[e]=a.decode(b[e]);else b=void 0!==b?a.decode(b):void 0;return b}if(g(c))for(e=0,f=c.length;e<f;e++)c[e]=a.decode(c[e]);
else c="string"===typeof c||c instanceof String?a.encode(c):c;return this.segment(b,c,d)};var A=n.query;n.query=function(b,c){if(!0===b)return a.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"===typeof b){var d=a.parseQuery(this._parts.query,this._parts.escapeQuerySpace),e=b.call(this,d);this._parts.query=a.buildQuery(e||d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!c);return this}return void 0!==b&&"string"!==typeof b?(this._parts.query=
a.buildQuery(b,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!c),this):A.call(this,b,c)};n.setQuery=function(b,c,d){var e=a.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"===typeof b||b instanceof String)e[b]=void 0!==c?c:null;else if("object"===typeof b)for(var f in b)v.call(b,f)&&(e[f]=b[f]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");this._parts.query=a.buildQuery(e,this._parts.duplicateQueryParameters,
this._parts.escapeQuerySpace);"string"!==typeof b&&(d=c);this.build(!d);return this};n.addQuery=function(b,c,d){var e=a.parseQuery(this._parts.query,this._parts.escapeQuerySpace);a.addQuery(e,b,void 0===c?null:c);this._parts.query=a.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof b&&(d=c);this.build(!d);return this};n.removeQuery=function(b,c,d){var e=a.parseQuery(this._parts.query,this._parts.escapeQuerySpace);a.removeQuery(e,b,c);this._parts.query=
a.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof b&&(d=c);this.build(!d);return this};n.hasQuery=function(b,c,d){var e=a.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return a.hasQuery(e,b,c,d)};n.setSearch=n.setQuery;n.addSearch=n.addQuery;n.removeSearch=n.removeQuery;n.hasSearch=n.hasQuery;n.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()};
n.normalizeProtocol=function(a){"string"===typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a));return this};n.normalizeHostname=function(a){this._parts.hostname&&(this.is("IDN")&&h?this._parts.hostname=h.toASCII(this._parts.hostname):this.is("IPv6")&&l&&(this._parts.hostname=l.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!a));return this};n.normalizePort=function(b){"string"===typeof this._parts.protocol&&
this._parts.port===a.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!b));return this};n.normalizePath=function(b){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var c,d=this._parts.path,e="",f,g;"/"!==d.charAt(0)&&(c=!0,d="/"+d);d=d.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");c&&(e=d.substring(1).match(/^(\.\.\/)+/)||"")&&(e=e[0]);for(;;){f=d.indexOf("/..");if(-1===f)break;else if(0===f){d=d.substring(3);continue}g=d.substring(0,f).lastIndexOf("/");
-1===g&&(g=f);d=d.substring(0,g)+d.substring(f+3)}c&&this.is("relative")&&(d=e+d.substring(1));d=a.recodePath(d);this._parts.path=d;this.build(!b);return this};n.normalizePathname=n.normalizePath;n.normalizeQuery=function(b){"string"===typeof this._parts.query&&(this._parts.query.length?this.query(a.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!b));return this};n.normalizeFragment=function(a){this._parts.fragment||(this._parts.fragment=null,this.build(!a));
return this};n.normalizeSearch=n.normalizeQuery;n.normalizeHash=n.normalizeFragment;n.iso8859=function(){var b=a.encode,c=a.decode;a.encode=escape;a.decode=decodeURIComponent;this.normalize();a.encode=b;a.decode=c;return this};n.unicode=function(){var b=a.encode,c=a.decode;a.encode=k;a.decode=unescape;this.normalize();a.encode=b;a.decode=c;return this};n.readable=function(){var b=this.clone();b.username("").password("").normalize();var c="";b._parts.protocol&&(c+=b._parts.protocol+"://");b._parts.hostname&&
(b.is("punycode")&&h?(c+=h.toUnicode(b._parts.hostname),b._parts.port&&(c+=":"+b._parts.port)):c+=b.host());b._parts.hostname&&b._parts.path&&"/"!==b._parts.path.charAt(0)&&(c+="/");c+=b.path(!0);if(b._parts.query){for(var d="",e=0,f=b._parts.query.split("&"),g=f.length;e<g;e++){var k=(f[e]||"").split("="),d=d+("&"+a.decodeQuery(k[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"));void 0!==k[1]&&(d+="="+a.decodeQuery(k[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}c+="?"+d.substring(1)}return c+=
a.decodeQuery(b.hash(),!0)};n.absoluteTo=function(b){var c=this.clone(),d=["protocol","username","password","hostname","port"],e,f;if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");b instanceof a||(b=new a(b));c._parts.protocol||(c._parts.protocol=b._parts.protocol);if(this._parts.hostname)return c;for(e=0;f=d[e];e++)c._parts[f]=b._parts[f];c._parts.path?".."===c._parts.path.substring(-2)&&(c._parts.path+="/"):(c._parts.path=b._parts.path,c._parts.query||
(c._parts.query=b._parts.query));"/"!==c.path().charAt(0)&&(b=b.directory(),c._parts.path=(b?b+"/":"")+c._parts.path,c.normalizePath());c.build();return c};n.relativeTo=function(b){var c=this.clone().normalize(),d,e,f,g;if(c._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");b=(new a(b)).normalize();d=c._parts;e=b._parts;f=c.path();g=b.path();if("/"!==f.charAt(0))throw Error("URI is already relative");if("/"!==g.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");
d.protocol===e.protocol&&(d.protocol=null);if(d.username===e.username&&d.password===e.password&&null===d.protocol&&null===d.username&&null===d.password&&d.hostname===e.hostname&&d.port===e.port)d.hostname=null,d.port=null;else return c.build();if(f===g)return d.path="",c.build();b=a.commonPath(c.path(),b.path());if(!b)return c.build();e=e.path.substring(b.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");d.path=e+d.path.substring(b.length);return c.build()};n.equals=function(b){var c=this.clone();
b=new a(b);var d={},f={},h={},k;c.normalize();b.normalize();if(c.toString()===b.toString())return!0;d=c.query();f=b.query();c.query("");b.query("");if(c.toString()!==b.toString()||d.length!==f.length)return!1;d=a.parseQuery(d,this._parts.escapeQuerySpace);f=a.parseQuery(f,this._parts.escapeQuerySpace);for(k in d)if(v.call(d,k)){if(!g(d[k])){if(d[k]!==f[k])return!1}else if(!e(d[k],f[k]))return!1;h[k]=!0}for(k in f)if(v.call(f,k)&&!h[k])return!1;return!0};n.duplicateQueryParameters=function(a){this._parts.duplicateQueryParameters=
!!a;return this};n.escapeQuerySpace=function(a){this._parts.escapeQuerySpace=!!a;return this};return a});return URI});
/* ******** */
